# –û–Ω–æ–≤–ª–µ–Ω–Ω—è Timestamps –ó–∞–ø–∏—Å—ñ–≤ –ß–∞—Å—É –∑ Masterok Market API

## –û–ø–∏—Å

–ö–æ–Ω—Å–æ–ª—å–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ `masterok:update-time-timestamps` –æ–Ω–æ–≤–ª—é—î –ø–æ–ª—è `created_at` —ñ `updated_at` –∑–∞–ø–∏—Å—ñ–≤ —á–∞—Å—É —É –ª–æ–∫–∞–ª—å–Ω—ñ–π –±–∞–∑—ñ –¥–∞–Ω–∏—Ö –∑ –¥–∞–Ω–∏–º–∏ –∑ Masterok Market API.

**–í–∞–∂–ª–∏–≤–æ:** –¶—è –∫–æ–º–∞–Ω–¥–∞ –ø—Ä–∞—Ü—é—î –∑ **Masterok Market API**, –∞ –Ω–µ –∑ Asana API!

## –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### –ë–∞–∑–æ–≤–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

```bash
php artisan masterok:update-time-timestamps
```

–ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –∫–æ–º–∞–Ω–¥–∞ –æ–Ω–æ–≤–ª—é—î –¥–æ 100 –∑–∞–ø–∏—Å—ñ–≤ —á–∞—Å—É, —É —è–∫–∏—Ö `created_at` –¥–æ—Ä—ñ–≤–Ω—é—î `updated_at` (—â–æ –æ–∑–Ω–∞—á–∞—î, —â–æ timestamps —â–µ –Ω–µ –±—É–ª–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ñ –∑ API).

### –û–ø—Ü—ñ—ó

#### `--time-id`

–û–Ω–æ–≤–∏—Ç–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π –∑–∞–ø–∏—Å —á–∞—Å—É –∑–∞ –π–æ–≥–æ ID –≤ –ª–æ–∫–∞–ª—å–Ω—ñ–π –±–∞–∑—ñ –¥–∞–Ω–∏—Ö.

```bash
php artisan masterok:update-time-timestamps --time-id=123
```

#### `--limit`

–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∑–∞–ø–∏—Å—ñ–≤ –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞ –æ–¥–∏–Ω –∑–∞–ø—É—Å–∫ (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º: 100).

```bash
php artisan masterok:update-time-timestamps --limit=500
```

#### `--force`

–û–Ω–æ–≤–∏—Ç–∏ –≤—Å—ñ –∑–∞–ø–∏—Å–∏ —á–∞—Å—É, –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ timestamps –≤–∂–µ –±—É–ª–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ñ.

```bash
php artisan masterok:update-time-timestamps --force
```

#### `--url`

–í–∫–∞–∑–∞—Ç–∏ –∫–∞—Å—Ç–æ–º–Ω–∏–π URL API (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º: `https://asana.masterok-market.com.ua/admin/api/timer/list`)

```bash
php artisan masterok:update-time-timestamps --url=https://api.example.com/timer/list
```

### –ö–æ–º–±—ñ–Ω–æ–≤–∞–Ω—ñ –ø—Ä–∏–∫–ª–∞–¥–∏

–û–Ω–æ–≤–∏—Ç–∏ –≤—Å—ñ –∑–∞–ø–∏—Å–∏ –∑ –æ–±–º–µ–∂–µ–Ω–Ω—è–º 1000:

```bash
php artisan masterok:update-time-timestamps --force --limit=1000
```

–û–Ω–æ–≤–∏—Ç–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π –∑–∞–ø–∏—Å –∑ –ø—Ä–∏–º—É—Å–æ–≤–∏–º –æ–Ω–æ–≤–ª–µ–Ω–Ω—è–º:

```bash
php artisan masterok:update-time-timestamps --time-id=123 --force
```

–í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –∫–∞—Å—Ç–æ–º–Ω–∏–π URL API:

```bash
php artisan masterok:update-time-timestamps --url=https://custom-api.com/timer --limit=200
```

## –©–æ —Ä–æ–±–∏—Ç—å –∫–æ–º–∞–Ω–¥–∞

1. **–û—Ç—Ä–∏–º—É—î –¥–∞–Ω—ñ –∑ Masterok Market API**:
   - –í–∏–∫–ª–∏–∫–∞—î endpoint `/admin/api/timer/list`
   - –û—Ç—Ä–∏–º—É—î –≤—Å—ñ –∑–∞–ø–∏—Å–∏ —á–∞—Å—É –∑ API

2. **–Ü–Ω–¥–µ–∫—Å—É—î –¥–∞–Ω—ñ API**:
   - –°—Ç–≤–æ—Ä—é—î —ñ–Ω–¥–µ–∫—Å –ø–æ `task_gid` –¥–ª—è —à–≤–∏–¥–∫–æ–≥–æ –ø–æ—à—É–∫—É
   - –ì—Ä—É–ø—É—î –∑–∞–ø–∏—Å–∏ –ø–æ task_gid

3. **–í–∏–±–∏—Ä–∞—î –∑–∞–ø–∏—Å–∏** –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è:
   - –Ø–∫—â–æ –≤–∫–∞–∑–∞–Ω–æ `--time-id`, –æ–±—Ä–æ–±–ª—è—î—Ç—å—Å—è –ª–∏—à–µ —Ü–µ–π –∑–∞–ø–∏—Å
   - –ë–µ–∑ `--force`: –≤–∏–±–∏—Ä–∞—î –∑–∞–ø–∏—Å–∏, –¥–µ `created_at` = `updated_at`
   - –ó `--force`: –≤–∏–±–∏—Ä–∞—î –≤—Å—ñ –∑–∞–ø–∏—Å–∏ —á–∞—Å—É

4. **–ó–Ω–∞—Ö–æ–¥–∏—Ç—å –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ—Å—Ç—å** –º—ñ–∂ –ª–æ–∫–∞–ª—å–Ω–∏–º–∏ –∑–∞–ø–∏—Å–∞–º–∏ —Ç–∞ API:
   - –ü–æ—Ä—ñ–≤–Ω—é—î –ø–æ `task_gid` —Ç–∞ `duration`
   - –®—É–∫–∞—î —Ç–æ—á–Ω–µ —Å–ø—ñ–≤–ø–∞–¥—ñ–Ω–Ω—è —Ç—Ä–∏–≤–∞–ª–æ—Å—Ç—ñ

5. **–û–Ω–æ–≤–ª—é—î –±–∞–∑—É –¥–∞–Ω–∏—Ö**:
   - –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `DB::table()` –¥–ª—è –ø—Ä—è–º–æ–≥–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
   - –û–±—Ö–æ–¥–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è timestamps Laravel
   - –ó–±–µ—Ä—ñ–≥–∞—î —Ç–æ—á–Ω—ñ –¥–∞—Ç–∏ –∑ API

6. **–õ–æ–≥—É—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏**:
   - –£—Å–ø—ñ—à–Ω—ñ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ø–∏—Å—É—é—Ç—å—Å—è –≤ –ª–æ–≥
   - –ü–æ–º–∏–ª–∫–∏ —Ç–∞–∫–æ–∂ –∑–∞–ø–∏—Å—É—é—Ç—å—Å—è –∑ –¥–µ—Ç–∞–ª—è–º–∏

## –§–æ—Ä–º–∞—Ç –¥–∞–Ω–∏—Ö API

–ö–æ–º–∞–Ω–¥–∞ –æ—á—ñ–∫—É—î –¥–∞–Ω—ñ —É —Ñ–æ—Ä–º–∞—Ç—ñ:

```json
[
  {
    "id": 749,
    "task_gid": "1211692396550896",
    "time": "00:37:41",
    "minute": 37,
    "coefficient": 1,
    "comment": null,
    "status": 1,
    "archive": 0,
    "status_act": "not_ok",
    "created_at": "2025-10-23 12:13:51",
    "updated_at": "2025-10-23 14:43:28",
    "date_invoice": null,
    "date_report": null
  }
]
```

### –í–∞–∂–ª–∏–≤—ñ –ø–æ–ª—è

- `task_gid` - GID –∑–∞–¥–∞—á—ñ –≤ Asana (–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –∑—ñ—Å—Ç–∞–≤–ª–µ–Ω–Ω—è)
- `time` - —Ç—Ä–∏–≤–∞–ª—ñ—Å—Ç—å —É —Ñ–æ—Ä–º–∞—Ç—ñ HH:MM:SS
- `created_at` - –¥–∞—Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–ø–∏—Å—É
- `updated_at` - –¥–∞—Ç–∞ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ø–∏—Å—É

## –í–∏–≤—ñ–¥ –∫–æ–º–∞–Ω–¥–∏

–ö–æ–º–∞–Ω–¥–∞ –ø–æ–∫–∞–∑—É—î:
- üïê –ü–æ—á–∞—Ç–æ–∫ —Ä–æ–±–æ—Ç–∏
- üì° URL API —Ç–∞ —Å—Ç–∞—Ç—É—Å –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö
- ‚úÖ –ö—ñ–ª—å–∫—ñ—Å—Ç—å –æ—Ç—Ä–∏–º–∞–Ω–∏—Ö –∑–∞–ø–∏—Å—ñ–≤ –∑ API
- üìÖ –†–µ–∂–∏–º —Ä–æ–±–æ—Ç–∏ (–Ω–æ—Ä–º–∞–ª—å–Ω–∏–π –∞–±–æ force)
- üì¶ –ö—ñ–ª—å–∫—ñ—Å—Ç—å –∑–Ω–∞–π–¥–µ–Ω–∏—Ö –∑–∞–ø–∏—Å—ñ–≤ –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
- –ü—Ä–æ–≥—Ä–µ—Å-–±–∞—Ä –æ–±—Ä–æ–±–∫–∏
- ‚úÖ –ö—ñ–ª—å–∫—ñ—Å—Ç—å –æ–Ω–æ–≤–ª–µ–Ω–∏—Ö –∑–∞–ø–∏—Å—ñ–≤
- ‚ö†Ô∏è –ö—ñ–ª—å–∫—ñ—Å—Ç—å –ø—Ä–æ–ø—É—â–µ–Ω–∏—Ö –∑–∞–ø–∏—Å—ñ–≤ (–±–µ–∑ –¥–∞–Ω–∏—Ö)
- ‚ùå –ö—ñ–ª—å–∫—ñ—Å—Ç—å –ø–æ–º–∏–ª–æ–∫
- üéâ –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—è —Ä–æ–±–æ—Ç–∏

## –ü—Ä–∏–∫–ª–∞–¥ –≤–∏–≤–æ–¥—É

```
üïê –ó–∞–ø—É—Å–∫ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —á–∞—Å–æ–≤–∏—Ö –º—ñ—Ç–æ–∫ –∑–∞–ø–∏—Å—ñ–≤ —á–∞—Å—É –∑ Masterok Market API...
üì° –û—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö –∑ API: https://asana.masterok-market.com.ua/admin/api/timer/list
‚úÖ –û—Ç—Ä–∏–º–∞–Ω–æ –∑–∞–ø–∏—Å—ñ–≤ –∑ API: 150
üìÖ –û–Ω–æ–≤–ª—é—î–º–æ –∑–∞–ø–∏—Å–∏, –¥–µ timestamps –Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –∑ API
üì¶ –ó–Ω–∞–π–¥–µ–Ω–æ –∑–∞–ø–∏—Å—ñ–≤ –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è: 45
 45/45 [============================] 100%

‚úÖ –û–Ω–æ–≤–ª–µ–Ω–æ: 42
‚ö†Ô∏è –ü—Ä–æ–ø—É—â–µ–Ω–æ (–Ω–µ–º–∞—î –¥–∞–Ω–∏—Ö): 3

üéâ –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–≤–µ—Ä—à–µ–Ω–æ!
```

## –ö–æ–ª–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏

### –ü–æ—á–∞—Ç–∫–æ–≤–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è

–ü—ñ—Å–ª—è —ñ–º–ø–æ—Ä—Ç—É –∑–∞–ø–∏—Å—ñ–≤ —á–∞—Å—É –∑ Masterok Market API, –∫–æ–ª–∏ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ñ –¥–∞—Ç–∏:

```bash
php artisan masterok:update-time-timestamps --force --limit=1000
```

### –†–µ–≥—É–ª—è—Ä–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è

–î–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ø–∏—Å—ñ–≤, —è–∫—ñ –±—É–ª–∏ —Å—Ç–≤–æ—Ä–µ–Ω—ñ/–æ–Ω–æ–≤–ª–µ–Ω—ñ, –∞–ª–µ —â–µ –Ω–µ –º–∞—é—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–∏—Ö timestamps:

```bash
php artisan masterok:update-time-timestamps --limit=100
```

### –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∑–∞–ø–∏—Å—É

–Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–ø—Ä–∞–≤–∏—Ç–∏ timestamps –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∑–∞–ø–∏—Å—É:

```bash
php artisan masterok:update-time-timestamps --time-id=123
```

### –ú–∞—Å–æ–≤–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è

–î–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –≤—Å—ñ—Ö –∑–∞–ø–∏—Å—ñ–≤ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –ø—ñ—Å–ª—è –º—ñ–≥—Ä–∞—Ü—ñ—ó):

```bash
php artisan masterok:update-time-timestamps --force --limit=5000
```

## –ê–ª–≥–æ—Ä–∏—Ç–º –∑—ñ—Å—Ç–∞–≤–ª–µ–Ω–Ω—è

–ö–æ–º–∞–Ω–¥–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –Ω–∞—Å—Ç—É–ø–Ω–∏–π –∞–ª–≥–æ—Ä–∏—Ç–º –¥–ª—è –∑–Ω–∞—Ö–æ–¥–∂–µ–Ω–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏—Ö –∑–∞–ø–∏—Å—ñ–≤:

1. **–ü–æ—à—É–∫ –ø–æ task_gid**: –ó–Ω–∞—Ö–æ–¥–∏—Ç—å –≤—Å—ñ API –∑–∞–ø–∏—Å–∏ –∑ —Ç–∞–∫–∏–º –∂–µ `task_gid`
2. **–ü–æ—à—É–∫ –ø–æ duration**: –®—É–∫–∞—î –∑–∞–ø–∏—Å –∑ —Ç–æ—á–Ω–æ —Ç–∞–∫–∏–º –∂–µ `duration` (—É —Å–µ–∫—É–Ω–¥–∞—Ö)
3. **Fallback**: –Ø–∫—â–æ —Ç–æ—á–Ω–æ–≥–æ —Å–ø—ñ–≤–ø–∞–¥—ñ–Ω–Ω—è –Ω–µ–º–∞—î, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –ø–µ—Ä—à–∏–π –∑–Ω–∞–π–¥–µ–Ω–∏–π –∑–∞–ø–∏—Å

### –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ duration –∑ API

```php
$apiDuration = strtotime($record['time']) - strtotime('TODAY');
// –ü—Ä–∏–∫–ª–∞–¥: "00:37:41" => 2261 —Å–µ–∫—É–Ω–¥
```

## –õ–æ–≥—É–≤–∞–Ω–Ω—è

–ö–æ–º–∞–Ω–¥–∞ –∑–∞–ø–∏—Å—É—î –¥–µ—Ç–∞–ª—å–Ω—ñ –ª–æ–≥–∏ –≤ `storage/logs/laravel.log`:

### –£—Å–ø—ñ—à–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è

```
[2025-10-28] local.INFO: –û–Ω–æ–≤–ª–µ–Ω–æ timestamps –∑–∞–ø–∏—Å—É —á–∞—Å—É
{
    "time_id": 123,
    "task_id": 456,
    "task_gid": "1211692396550896",
    "created_at": "2025-10-23 12:13:51",
    "updated_at": "2025-10-23 14:43:28"
}
```

### –ü–æ–º–∏–ª–∫–∞ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è

```
[2025-10-28] local.ERROR: –ü–æ–º–∏–ª–∫–∞ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è timestamps –∑–∞–ø–∏—Å—É —á–∞—Å—É
{
    "time_id": 123,
    "task_id": 456,
    "error": "API connection failed"
}
```

## –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ

### –§–æ—Ä–º–∞—Ç –¥–∞—Ç

API –ø–æ–≤–µ—Ä—Ç–∞—î –¥–∞—Ç–∏ –≤–∂–µ —É —Ñ–æ—Ä–º–∞—Ç—ñ MySQL:
```
2025-10-23 12:13:51
```

–¶—ñ –¥–∞—Ç–∏ –º–æ–∂—É—Ç—å –±—É—Ç–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω—ñ –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ –±–µ–∑ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—ó.

### –ü—Ä—è–º–∏–π UPDATE

–ö–æ–º–∞–Ω–¥–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `DB::table()->update()` –∑–∞–º—ñ—Å—Ç—å `Model::update()`, —â–æ–±:
- –û–±—ñ–π—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è `updated_at` Laravel
- –ó–±–µ—Ä–µ–≥—Ç–∏ —Ç–æ—á–Ω—ñ –¥–∞—Ç–∏ –∑ API
- –ü—ñ–¥–≤–∏—â–∏—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å –¥–ª—è –º–∞—Å–æ–≤–∏—Ö –æ–Ω–æ–≤–ª–µ–Ω—å

### –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫

- API –ø–æ–º–∏–ª–∫–∏ –ª–æ–≥—É—é—Ç—å—Å—è —ñ –Ω–µ –∑—É–ø–∏–Ω—è—é—Ç—å –æ–±—Ä–æ–±–∫—É —ñ–Ω—à–∏—Ö –∑–∞–ø–∏—Å—ñ–≤
- –ó–∞–ø–∏—Å–∏ –±–µ–∑ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏—Ö task_gid –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—å—Å—è
- –ó–∞–ø–∏—Å–∏ –±–µ–∑ –¥–∞—Ç –≤ API –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—å—Å—è
- –ù–µ—ñ—Å–Ω—É—é—á—ñ –∑–∞–ø–∏—Å–∏ –ø–æ–≤–µ—Ä—Ç–∞—é—Ç—å –ø–æ–º–∏–ª–∫—É

## –í—ñ–¥–º—ñ–Ω–Ω–æ—Å—Ç—ñ –≤—ñ–¥ asana:update-timestamps

| –ê—Å–ø–µ–∫—Ç | masterok:update-time-timestamps | asana:update-timestamps |
|--------|--------------------------------|-------------------------|
| –î–∂–µ—Ä–µ–ª–æ –¥–∞–Ω–∏—Ö | Masterok Market API | Asana API |
| –¢–∞–±–ª–∏—Ü—è | `times` | `tasks` |
| –§–æ—Ä–º–∞—Ç –¥–∞—Ç | MySQL (–≥–æ—Ç–æ–≤–∏–π) | ISO 8601 (–ø–æ—Ç—Ä—ñ–±–Ω–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—è) |
| –ó—ñ—Å—Ç–∞–≤–ª–µ–Ω–Ω—è | task_gid + duration | gid |
| API endpoint | `/admin/api/timer/list` | Asana SDK |

## –ü–ª–∞–Ω—É–≤–∞–Ω–Ω—è

–ú–æ–∂–Ω–∞ –¥–æ–¥–∞—Ç–∏ –∫–æ–º–∞–Ω–¥—É –≤ –ø–ª–∞–Ω—É–≤–∞–ª—å–Ω–∏–∫ –¥–ª—è —Ä–µ–≥—É–ª—è—Ä–Ω–æ–≥–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è:

```php
// routes/console.php

Schedule::command('masterok:update-time-timestamps --limit=50')
    ->daily()
    ->at('04:00');
```

## –ó–≤'—è–∑–æ–∫ –∑ —ñ–Ω—à–∏–º–∏ –∫–æ–º–∞–Ω–¥–∞–º–∏

–¶—è –∫–æ–º–∞–Ω–¥–∞ –¥–æ–±—Ä–µ –ø—Ä–∞—Ü—é—î —Ä–∞–∑–æ–º –∑:

- `app:fetch-timer-data-from-api` - —ñ–º–ø–æ—Ä—Ç –¥–∞–Ω–∏—Ö —Ç–∞–π–º–µ—Ä–∞
- `app:fetch-timer-data-from-api --import --truncate` - –ø–æ–≤–Ω–∏–π —Ä–µ—ñ–º–ø–æ—Ä—Ç

–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–∏–π –ø–æ—Ä—è–¥–æ–∫:

```bash
# 1. –Ü–º–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ –¥–∞–Ω—ñ —Ç–∞–π–º–µ—Ä–∞ –∑ API
php artisan app:fetch-timer-data-from-api --import

# 2. –û–Ω–æ–≤–∏—Ç–∏ timestamps –∑ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–º–∏ –¥–∞—Ç–∞–º–∏
php artisan masterok:update-time-timestamps --force --limit=1000
```

## –ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å

- –û—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö –∑ API: ~2-5 —Å–µ–∫—É–Ω–¥
- –û–±—Ä–æ–±–∫–∞ 100 –∑–∞–ø–∏—Å—ñ–≤: ~10-20 —Å–µ–∫—É–Ω–¥
- –û–±—Ä–æ–±–∫–∞ 1000 –∑–∞–ø–∏—Å—ñ–≤: ~1-2 —Ö–≤–∏–ª–∏–Ω–∏
- –ó–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ —à–≤–∏–¥–∫–æ—Å—Ç—ñ API —Ç–∞ –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –∑–∞–ø–∏—Å—ñ–≤

## –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤

–ü—ñ—Å–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∫–æ–º–∞–Ω–¥–∏ –º–æ–∂–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏:

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∑–∞–ø–∏—Å—ñ–≤ –∑ —Ä—ñ–∑–Ω–∏–º–∏ timestamps
php artisan tinker --execute="
echo '–ó–∞–ø–∏—Å—ñ–≤ –∑ —Ä—ñ–∑–Ω–∏–º–∏ timestamps: ' . 
\App\Models\Time::whereRaw('created_at != updated_at')->count() . PHP_EOL;
"

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π –∑–∞–ø–∏—Å
php artisan tinker --execute="
\$time = \App\Models\Time::find(123);
echo 'Created: ' . \$time->created_at . PHP_EOL;
echo 'Updated: ' . \$time->updated_at . PHP_EOL;
"

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤—Å—ñ –∑–∞–ø–∏—Å–∏ –±–µ–∑ task_gid
php artisan tinker --execute="
echo '–ó–∞–ø–∏—Å—ñ–≤ –±–µ–∑ task->gid: ' . 
\App\Models\Time::whereHas('task', function(\$q) {
    \$q->whereNull('gid');
})->count() . PHP_EOL;
"
```

## Troubleshooting

### API –Ω–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –¥–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å API
curl https://asana.masterok-market.com.ua/admin/api/timer/list

# –í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –∫–∞—Å—Ç–æ–º–Ω–∏–π URL
php artisan masterok:update-time-timestamps --url=https://backup-api.com/timer/list
```

### –ó–∞–ø–∏—Å–∏ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω—ñ

–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —á–∏ –∑–∞–ø–∏—Å–∏ –º–∞—é—Ç—å –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ –∑–∞–¥–∞—á—ñ –∑ `gid`:

```bash
php artisan tinker --execute="
\$withoutGid = \App\Models\Time::whereHas('task', function(\$q) {
    \$q->whereNull('gid');
})->count();
echo '–ó–∞–ø–∏—Å—ñ–≤ –±–µ–∑ task->gid: ' . \$withoutGid . PHP_EOL;
"
```

### –ü–æ–≤—ñ–ª—å–Ω–∞ —Ä–æ–±–æ—Ç–∞

–ó–±—ñ–ª—å—à–∏—Ç–∏ timeout –¥–ª—è API:

```php
// –£ –∫–æ–º–∞–Ω–¥—ñ –∑–º—ñ–Ω–∏—Ç–∏:
Http::timeout(60)->get($url);  // –∑–∞–º—ñ—Å—Ç—å timeout(30)
```

–ê–±–æ –∑–º–µ–Ω—à–∏—Ç–∏ limit:

```bash
php artisan masterok:update-time-timestamps --limit=50
```

