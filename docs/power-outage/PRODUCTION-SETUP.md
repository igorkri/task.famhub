# üéØ –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Cron –Ω–∞ Production —Å–µ—Ä–≤–µ—Ä—ñ

## ‚úÖ –í–∞—à–∞ —Å–∏—Å—Ç–µ–º–∞ –≤–∂–µ –ø—Ä–∞—Ü—é—î!

–ó –≤–∏–≤–æ–¥—É –∫–æ–º–∞–Ω–¥–∏ `schedule:list` –≤–∏–¥–Ω–æ, —â–æ scheduler –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ:

```
*/10 *   * * *  php artisan power:fetch-schedule ... Next Due: –∑–∞ 8 —Ö–≤–∏–ª–∏–Ω
```

**–ö–æ–º–∞–Ω–¥–∞ –∑–∞–ø–ª–∞–Ω–æ–≤–∞–Ω–∞ —Ç–∞ –ø—Ä–∞—Ü—é—î!** üéâ

---

## üìç –®–ª—è—Ö –¥–æ –ø—Ä–æ—î–∫—Ç—É –Ω–∞ production

```
/home/igor/web/task.dev2025.ingsot.com/public_html/task.famhub
```

---

## üîß –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Cron (—è–∫—â–æ —â–µ –Ω–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ)

### –í–∞—Ä—ñ–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ cPanel (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ –¥–ª—è shared hosting)

1. –£–≤—ñ–π–¥—ñ—Ç—å –≤ **cPanel**
2. –ó–Ω–∞–π–¥—ñ—Ç—å —Ä–æ–∑–¥—ñ–ª **"Cron Jobs"** (–ó–∞–≤–¥–∞–Ω–Ω—è Cron)
3. –î–æ–¥–∞–π—Ç–µ –Ω–æ–≤–∏–π Cron Job:
   - **Minute:** `*`
   - **Hour:** `*`
   - **Day:** `*`
   - **Month:** `*`
   - **Weekday:** `*`
   - **Command:**
     ```bash
     cd /home/igor/web/task.dev2025.ingsot.com/public_html/task.famhub && php8.4 artisan schedule:run >> /dev/null 2>&1
     ```

4. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **"Add New Cron Job"**

---

### –í–∞—Ä—ñ–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ —Ç–µ—Ä–º—ñ–Ω–∞–ª (SSH)

```bash
# –í—ñ–¥–∫—Ä–∏—Ç–∏ crontab
crontab -e

# –î–æ–¥–∞—Ç–∏ —Ä—è–¥–æ–∫
* * * * * cd /home/igor/web/task.dev2025.ingsot.com/public_html/task.famhub && php8.4 artisan schedule:run >> /dev/null 2>&1

# –ó–±–µ—Ä–µ–≥—Ç–∏: Ctrl+O ‚Üí Enter ‚Üí Ctrl+X
```

---

### –í–∞—Ä—ñ–∞–Ω—Ç 3: –ó –ª–æ–≥—É–≤–∞–Ω–Ω—è–º (–¥–ª—è debugging)

```bash
* * * * * cd /home/igor/web/task.dev2025.ingsot.com/public_html/task.famhub && php8.4 artisan schedule:run >> /home/igor/web/task.dev2025.ingsot.com/public_html/task.famhub/storage/logs/scheduler.log 2>&1
```

---

## ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

### 1. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å–ø–∏—Å–æ–∫ –∑–∞–≤–¥–∞–Ω—å
```bash
cd /home/igor/web/task.dev2025.ingsot.com/public_html/task.famhub
php8.4 artisan schedule:list
```

**–í–∞—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç (–≤—Å–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ!):**
```
*/10 *   * * *  php artisan power:fetch-schedule ... Next Due: –∑–∞ 8 —Ö–≤–∏–ª–∏–Ω
```

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç–∏ scheduler –≤—Ä—É—á–Ω—É
```bash
php8.4 artisan schedule:run -v
```

### 3. –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –∫–æ–º–∞–Ω–¥—É –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ
```bash
php8.4 artisan power:fetch-schedule -v
```

### 4. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ crontab
```bash
crontab -l | grep schedule
```

–ú–∞—î –ø–æ–∫–∞–∑–∞—Ç–∏:
```
* * * * * cd /home/igor/web/task.dev2025.ingsot.com/public_html/task.famhub && php8.4 artisan schedule:run >> /dev/null 2>&1
```

---

## üìä –Ø–∫ –ø—Ä–∞—Ü—é—î

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  CRON (–∫–æ–∂–Ω—É —Ö–≤–∏–ª–∏–Ω—É)                ‚îÇ
‚îÇ  –ó–∞–ø—É—Å–∫–∞—î schedule:run               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚îÇ
               ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Laravel Scheduler                   ‚îÇ
‚îÇ  –ü–µ—Ä–µ–≤—ñ—Ä—è—î routes/console.php        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚îÇ
               ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –ö–æ–∂–Ω—ñ 10 —Ö–≤–∏–ª–∏–Ω (*/10)              ‚îÇ
‚îÇ  power:fetch-schedule                ‚îÇ
‚îÇ  ‚îú‚îÄ –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î HTML –∑ –î–¢–ï–ö           ‚îÇ
‚îÇ  ‚îú‚îÄ –ü–∞—Ä—Å–∏—Ç—å —Ç–∞–±–ª–∏—Ü—é                  ‚îÇ
‚îÇ  ‚îú‚îÄ –ü–µ—Ä–µ–≤—ñ—Ä—è—î –∑–º—ñ–Ω–∏ (hash)           ‚îÇ
‚îÇ  ‚îî‚îÄ –Ø–∫—â–æ —î –∑–º—ñ–Ω–∏:                    ‚îÇ
‚îÇ     ‚îú‚îÄ –ó–±–µ—Ä—ñ–≥–∞—î –≤ –ë–î                 ‚îÇ
‚îÇ     ‚îú‚îÄ –ì–µ–Ω–µ—Ä—É—î –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è            ‚îÇ
‚îÇ     ‚îî‚îÄ –ù–∞–¥—Å–∏–ª–∞—î –≤ Telegram           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ù–∞—Å—Ç—É–ø–Ω–∏–π –∑–∞–ø—É—Å–∫:** –ó–∞ 8 —Ö–≤–∏–ª–∏–Ω (–∑–≥—ñ–¥–Ω–æ –≤–∞—à–æ–≥–æ –≤–∏–≤–æ–¥—É)

---

## üîç –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥

### –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –ª–æ–≥–∏ Laravel
```bash
tail -f /home/igor/web/task.dev2025.ingsot.com/public_html/task.famhub/storage/logs/laravel.log | grep -i power
```

### –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –ª–æ–≥–∏ scheduler (—è–∫—â–æ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω—ñ)
```bash
tail -f /home/igor/web/task.dev2025.ingsot.com/public_html/task.famhub/storage/logs/scheduler.log
```

### –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –æ—Å—Ç–∞–Ω–Ω—ñ–π –≥—Ä–∞—Ñ—ñ–∫ —É –ë–î
```bash
cd /home/igor/web/task.dev2025.ingsot.com/public_html/task.famhub
php8.4 artisan tinker --execute="
    \$s = App\\Models\\PowerOutageSchedule::latest()->first();
    echo '–î–∞—Ç–∞: ' . \$s->schedule_date->format('d.m.Y') . PHP_EOL;
    echo '–û—Ç—Ä–∏–º–∞–Ω–æ: ' . \$s->fetched_at->format('d.m.Y H:i:s') . PHP_EOL;
"
```

---

## üì± Telegram —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è

–ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å, —â–æ –≤ `.env` —Ñ–∞–π–ª—ñ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ:

```env
TELEGRAM_BOT_TOKEN=your_actual_bot_token
TELEGRAM_CHAT_ID=your_actual_chat_id
```

–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –º–æ–∂–Ω–∞:
```bash
cd /home/igor/web/task.dev2025.ingsot.com/public_html/task.famhub
grep TELEGRAM .env
```

---

## üîß –Ü–Ω—à—ñ –∫–æ–º–∞–Ω–¥–∏ –ø–ª–∞–Ω—É–≤–∞–ª—å–Ω–∏–∫–∞

–ó–≥—ñ–¥–Ω–æ –≤–∞—à–æ–≥–æ –≤–∏–≤–æ–¥—É, —Ç–∞–∫–æ–∂ –ø—Ä–∞—Ü—é—é—Ç—å:

### 1. –û—á–∏—â–µ–Ω–Ω—è –µ–∫—Å–ø–æ—Ä—Ç—ñ–≤ Filament (—â–æ–¥–Ω—è –æ 00:00)
```
0    0   * * *  php artisan filament-excel:prune
```

### 2. –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è Asana (–∫–æ–∂–Ω—ñ 6 –≥–æ–¥–∏–Ω)
```
0    */6 * * *  php artisan asana:sync-tasks --hours=6 --limit=100
```

### 3. –ì—Ä–∞—Ñ—ñ–∫–∏ –≤—ñ–¥–∫–ª—é—á–µ–Ω—å (–∫–æ–∂–Ω—ñ 10 —Ö–≤–∏–ª–∏–Ω) ‚ö°
```
*/10 *   * * *  php artisan power:fetch-schedule
```

---

## üéØ –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º–∏

‚úÖ **Scheduler –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ** - 3 –∫–æ–º–∞–Ω–¥–∏ –∑–∞–ø–ª–∞–Ω–æ–≤–∞–Ω–∏—Ö  
‚úÖ **power:fetch-schedule** - –ø—Ä–∞—Ü—é—î –∫–æ–∂–Ω—ñ 10 —Ö–≤–∏–ª–∏–Ω  
‚úÖ **–ù–∞—Å—Ç—É–ø–Ω–∏–π –∑–∞–ø—É—Å–∫** - –∑–∞ 8 —Ö–≤–∏–ª–∏–Ω (–Ω–∞ –º–æ–º–µ–Ω—Ç –≤–∞—à–æ—ó –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏)  
‚úÖ **PHP –≤–µ—Ä—Å—ñ—è** - 8.4 (–ø—Ä–∞–≤–∏–ª—å–Ω–æ)  
‚úÖ **–®–ª—è—Ö –¥–æ –ø—Ä–æ—î–∫—Ç—É** - `/home/igor/web/task.dev2025.ingsot.com/public_html/task.famhub`  

**–ó–∞–ª–∏—à–∏–ª–æ—Å—å —Ç—ñ–ª—å–∫–∏ –ø–µ—Ä–µ–∫–æ–Ω–∞—Ç–∏—Å—å, —â–æ cron job –¥–æ–¥–∞–Ω–æ!**

---

## üöÄ –®–≤–∏–¥–∫–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —á–µ—Ä–µ–∑ 10-15 —Ö–≤–∏–ª–∏–Ω

–ü—ñ—Å–ª—è —Ç–æ–≥–æ, —è–∫ –ø—Ä–æ–π–¥–µ 10 —Ö–≤–∏–ª–∏–Ω:

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ª–æ–≥–∏
tail -30 storage/logs/laravel.log | grep -i power

# –ê–±–æ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤ –ë–î
php8.4 artisan tinker --execute="
    echo App\\Models\\PowerOutageSchedule::latest()->first()->fetched_at;
"
```

–Ø–∫—â–æ —á–∞—Å –æ–Ω–æ–≤–∏–≤—Å—è - **–≤—Å–µ –ø—Ä–∞—Ü—é—î!** üéâ

---

## üìû –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

–Ø–∫—â–æ –≤–∏–Ω–∏–∫–ª–∏ –ø–∏—Ç–∞–Ω–Ω—è –∞–±–æ –ø—Ä–æ–±–ª–µ–º–∏:

1. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏:**
   ```bash
   tail -f storage/logs/laravel.log
   ```

2. **–ó–∞–ø—É—Å—Ç—ñ—Ç—å –≤—Ä—É—á–Ω—É:**
   ```bash
   php8.4 artisan power:fetch-schedule -v
   ```

3. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø—Ä–∞–≤–∞:**
   ```bash
   ls -la storage/logs/
   chmod -R 775 storage
   ```

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

- [AUTO-SCHEDULE-SETUP.md](AUTO-SCHEDULE-SETUP.md) - –î–µ—Ç–∞–ª—å–Ω–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è
- [AUTO-SCHEDULE-QUICKREF.md](AUTO-SCHEDULE-QUICKREF.md) - –®–≤–∏–¥–∫–∏–π –¥–æ–≤—ñ–¥–Ω–∏–∫
- [SERVER-SETUP-EXAMPLES.md](SERVER-SETUP-EXAMPLES.md) - –ü—Ä–∏–∫–ª–∞–¥–∏ –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö —Å–µ—Ä–≤–µ—Ä—ñ–≤
- [CHEATSHEET.md](CHEATSHEET.md) - –®–≤–∏–¥–∫–∞ —à–ø–∞—Ä–≥–∞–ª–∫–∞

---

**–°—Ç–≤–æ—Ä–µ–Ω–æ:** 10.11.2025  
**–°–µ—Ä–≤–µ—Ä:** dev2025.ingsot.com  
**–ü—Ä–æ—î–∫—Ç:** task.famhub  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –¥–æ —Ä–æ–±–æ—Ç–∏

