# –§–æ—Ä–º–∞—Ç Telegram –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å

## –û–≥–ª—è–¥

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∑–Ω–∞—á–∞—î —Ç–∏–ø –≥—Ä–∞—Ñ—ñ–∫–∞ —Ç–∞ —Ñ–æ—Ä–º—É—î –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤ Telegram –∑ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ—é —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—î—é.

## –¢–∏–ø–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å

### 1. –û–Ω–æ–≤–ª–µ–Ω–Ω—è –≥—Ä–∞—Ñ—ñ–∫–∞ –Ω–∞ —Å—å–æ–≥–æ–¥–Ω—ñ üîÑ

**–ö–æ–ª–∏:** –ì—Ä–∞—Ñ—ñ–∫ –Ω–∞ –ø–æ—Ç–æ—á–Ω–∏–π –¥–µ–Ω—å –∑–º—ñ–Ω–∏–≤—Å—è.

**–ü—Ä–∏–∫–ª–∞–¥:**
```
üîÑ –û–ù–û–í–õ–ï–ù–ù–Ø –≥—Ä–∞—Ñ—ñ–∫–∞ –Ω–∞ –°–¨–û–ì–û–î–ù–Ü
üìÖ 10.11.2025 (–Ω–µ–¥—ñ–ª—è)

‚ö†Ô∏è –ì—Ä–∞—Ñ—ñ–∫ –≤—ñ–¥–∫–ª—é—á–µ–Ω—å –∑–º—ñ–Ω–∏–≤—Å—è!

‚è∞ –ü–µ—Ä—ñ–æ–¥–∏ –≤—ñ–¥–∫–ª—é—á–µ–Ω—å:
‚Ä¢ 07:00 - 16:00 (9 –≥–æ–¥)
  ‚îî –ß–µ—Ä–≥–∏: 2.5
‚Ä¢ 16:00 - 23:59 (7 –≥–æ–¥ 59 —Ö–≤)
  ‚îî –ß–µ—Ä–≥–∏: 4

üìù –û–ø—É–±–ª—ñ–∫–æ–≤–∞–Ω–æ: 10-11-2025 14:30

üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —á–µ—Ä–≥–∞—Ö:
‚Ä¢ –ß–µ—Ä–≥–∞ 1: 8.5 –≥–æ–¥ –±–µ–∑ —Å–≤—ñ—Ç–ª–∞
‚Ä¢ –ß–µ—Ä–≥–∞ 2: 12.0 –≥–æ–¥ –±–µ–∑ —Å–≤—ñ—Ç–ª–∞
‚Ä¢ –ß–µ—Ä–≥–∞ 3: 6.5 –≥–æ–¥ –±–µ–∑ —Å–≤—ñ—Ç–ª–∞

üí¨ –£ –∑–≤'—è–∑–∫—É –∑—ñ —Å–∫–ª–∞–¥–Ω–æ—é —Å–∏—Ç—É–∞—Ü—ñ—î—é –≤ –µ–Ω–µ—Ä–≥–æ—Å–∏—Å—Ç–µ–º—ñ...
```

---

### 2. –ì—Ä–∞—Ñ—ñ–∫ –Ω–∞ —Å—å–æ–≥–æ–¥–Ω—ñ (–ø–µ—Ä—à–∏–π —Ä–∞–∑) üîå

**–ö–æ–ª–∏:** –û—Ç—Ä–∏–º–∞–Ω–æ –≥—Ä–∞—Ñ—ñ–∫ –Ω–∞ –ø–æ—Ç–æ—á–Ω–∏–π –¥–µ–Ω—å –≤–ø–µ—Ä—à–µ.

**–ü—Ä–∏–∫–ª–∞–¥:**
```
üîå –ì—Ä–∞—Ñ—ñ–∫ –≤—ñ–¥–∫–ª—é—á–µ–Ω—å –Ω–∞ –°–¨–û–ì–û–î–ù–Ü
üìÖ 10.11.2025 (–Ω–µ–¥—ñ–ª—è)

‚è∞ –ü–µ—Ä—ñ–æ–¥–∏ –≤—ñ–¥–∫–ª—é—á–µ–Ω—å:
‚Ä¢ 07:00 - 16:00 (9 –≥–æ–¥)
  ‚îî –ß–µ—Ä–≥–∏: 2.5
‚Ä¢ 16:00 - 23:59 (7 –≥–æ–¥ 59 —Ö–≤)
  ‚îî –ß–µ—Ä–≥–∏: 4

üìù –û–ø—É–±–ª—ñ–∫–æ–≤–∞–Ω–æ: 10-11-2025 08:00

üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —á–µ—Ä–≥–∞—Ö:
‚Ä¢ –ß–µ—Ä–≥–∞ 1: 8.5 –≥–æ–¥ –±–µ–∑ —Å–≤—ñ—Ç–ª–∞
‚Ä¢ –ß–µ—Ä–≥–∞ 2: 12.0 –≥–æ–¥ –±–µ–∑ —Å–≤—ñ—Ç–ª–∞
‚Ä¢ –ß–µ—Ä–≥–∞ 3: 6.5 –≥–æ–¥ –±–µ–∑ —Å–≤—ñ—Ç–ª–∞
```

---

### 3. –ù–æ–≤–∏–π –≥—Ä–∞—Ñ—ñ–∫ –Ω–∞ –∑–∞–≤—Ç—Ä–∞ üìÖ

**–ö–æ–ª–∏:** –û–ø—É–±–ª—ñ–∫–æ–≤–∞–Ω–æ –≥—Ä–∞—Ñ—ñ–∫ –Ω–∞ –Ω–∞—Å—Ç—É–ø–Ω–∏–π –¥–µ–Ω—å.

**–ü—Ä–∏–∫–ª–∞–¥:**
```
üìÖ –ù–û–í–ò–ô –≥—Ä–∞—Ñ—ñ–∫ –Ω–∞ –ó–ê–í–¢–†–ê
üóì 11.11.2025 (–ø–æ–Ω–µ–¥—ñ–ª–æ–∫)

‚ú® –ì—Ä–∞—Ñ—ñ–∫ –Ω–∞ –∑–∞–≤—Ç—Ä–∞ –æ–ø—É–±–ª—ñ–∫–æ–≤–∞–Ω–æ!

‚è∞ –ü–µ—Ä—ñ–æ–¥–∏ –≤—ñ–¥–∫–ª—é—á–µ–Ω—å:
‚Ä¢ 00:00 - 06:00 (6 –≥–æ–¥)
  ‚îî –ß–µ—Ä–≥–∏: 1.3
‚Ä¢ 12:00 - 18:00 (6 –≥–æ–¥)
  ‚îî –ß–µ—Ä–≥–∏: 2.4

üìù –û–ø—É–±–ª—ñ–∫–æ–≤–∞–Ω–æ: 10-11-2025 19:00

üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —á–µ—Ä–≥–∞—Ö:
‚Ä¢ –ß–µ—Ä–≥–∞ 1: 6.0 –≥–æ–¥ –±–µ–∑ —Å–≤—ñ—Ç–ª–∞
‚Ä¢ –ß–µ—Ä–≥–∞ 2: 8.5 –≥–æ–¥ –±–µ–∑ —Å–≤—ñ—Ç–ª–∞
‚Ä¢ –ß–µ—Ä–≥–∞ 3: 4.0 –≥–æ–¥ –±–µ–∑ —Å–≤—ñ—Ç–ª–∞
‚Ä¢ –ß–µ—Ä–≥–∞ 4: 7.5 –≥–æ–¥ –±–µ–∑ —Å–≤—ñ—Ç–ª–∞

üí¨ –ó–∞ —Ä–æ–∑–ø–æ—Ä—è–¥–∂–µ–Ω–Ω—è–º –ù–ï–ö ¬´–£–∫—Ä–µ–Ω–µ—Ä–≥–æ¬ª...
```

---

### 4. –ó–≤–∏—á–∞–π–Ω–∏–π –≥—Ä–∞—Ñ—ñ–∫ üîå

**–ö–æ–ª–∏:** –ì—Ä–∞—Ñ—ñ–∫ –Ω–∞ —ñ–Ω—à—É –¥–∞—Ç—É (–Ω–µ —Å—å–æ–≥–æ–¥–Ω—ñ, –Ω–µ –∑–∞–≤—Ç—Ä–∞).

**–ü—Ä–∏–∫–ª–∞–¥:**
```
üîå –ì—Ä–∞—Ñ—ñ–∫ –≤—ñ–¥–∫–ª—é—á–µ–Ω—å
üìÖ 15.11.2025 (–ø'—è—Ç–Ω–∏—Ü—è)

‚è∞ –ü–µ—Ä—ñ–æ–¥–∏ –≤—ñ–¥–∫–ª—é—á–µ–Ω—å:
‚Ä¢ 08:00 - 17:00 (9 –≥–æ–¥)
  ‚îî –ß–µ—Ä–≥–∏: 3.5

üìù –û–ø—É–±–ª—ñ–∫–æ–≤–∞–Ω–æ: 14-11-2025 18:00

üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —á–µ—Ä–≥–∞—Ö:
‚Ä¢ –ß–µ—Ä–≥–∞ 3: 9.0 –≥–æ–¥ –±–µ–∑ —Å–≤—ñ—Ç–ª–∞
‚Ä¢ –ß–µ—Ä–≥–∞ 5: 9.0 –≥–æ–¥ –±–µ–∑ —Å–≤—ñ—Ç–ª–∞
```

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è

### 1. –ó–∞–≥–æ–ª–æ–≤–æ–∫ üìã

–í–∏–∑–Ω–∞—á–∞—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —Ç–∏–ø—É:

```php
if ($isToday && $isUpdate) {
    // üîÑ –û–ù–û–í–õ–ï–ù–ù–Ø –≥—Ä–∞—Ñ—ñ–∫–∞ –Ω–∞ –°–¨–û–ì–û–î–ù–Ü
} elseif ($isToday) {
    // üîå –ì—Ä–∞—Ñ—ñ–∫ –≤—ñ–¥–∫–ª—é—á–µ–Ω—å –Ω–∞ –°–¨–û–ì–û–î–ù–Ü
} elseif ($isTomorrow) {
    // üìÖ –ù–û–í–ò–ô –≥—Ä–∞—Ñ—ñ–∫ –Ω–∞ –ó–ê–í–¢–†–ê
} else {
    // üîå –ì—Ä–∞—Ñ—ñ–∫ –≤—ñ–¥–∫–ª—é—á–µ–Ω—å
}
```

### 2. –î–∞—Ç–∞ —Ç–∞ –¥–µ–Ω—å —Ç–∏–∂–Ω—è üìÖ

```
üìÖ 10.11.2025 (–Ω–µ–¥—ñ–ª—è)
```

–§–æ—Ä–º–∞—Ç: `–¥–¥.–º–º.—Ä—Ä—Ä—Ä (–¥–µ–Ω—å_—Ç–∏–∂–Ω—è)`

### 3. –ü–µ—Ä—ñ–æ–¥–∏ –≤—ñ–¥–∫–ª—é—á–µ–Ω—å ‚è∞

```
‚è∞ Per√≠–æ–¥–∏ –≤—ñ–¥–∫–ª—é—á–µ–Ω—å:
‚Ä¢ 07:00 - 16:00 (9 –≥–æ–¥)
  ‚îî –ß–µ—Ä–≥–∏: 2.5
‚Ä¢ 16:00 - 23:59 (7 –≥–æ–¥ 59 —Ö–≤)
  ‚îî –ß–µ—Ä–≥–∏: 4
```

**–Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è:**
- –ß–∞—Å –ø–æ—á–∞—Ç–∫—É —Ç–∞ –∫—ñ–Ω—Ü—è
- –¢—Ä–∏–≤–∞–ª—ñ—Å—Ç—å –ø–µ—Ä—ñ–æ–¥—É
- –ß–µ—Ä–≥–∏, —è–∫—ñ –±—É–¥—É—Ç—å –≤—ñ–¥–∫–ª—é—á–µ–Ω—ñ

### 4. –î–∞—Ç–∞ –ø—É–±–ª—ñ–∫–∞—Ü—ñ—ó üìù

```
üìù –û–ø—É–±–ª—ñ–∫–æ–≤–∞–Ω–æ: 10-11-2025 14:30
```

–ó `metadata.created_date` (—è–∫—â–æ –¥–æ—Å—Ç—É–ø–Ω–æ).

### 5. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —á–µ—Ä–≥–∞—Ö üìä

```
üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —á–µ—Ä–≥–∞—Ö:
‚Ä¢ –ß–µ—Ä–≥–∞ 1: 8.5 –≥–æ–¥ –±–µ–∑ —Å–≤—ñ—Ç–ª–∞
‚Ä¢ –ß–µ—Ä–≥–∞ 2: 12.0 –≥–æ–¥ –±–µ–∑ —Å–≤—ñ—Ç–ª–∞
‚Ä¢ –ß–µ—Ä–≥–∞ 3: 6.5 –≥–æ–¥ –±–µ–∑ —Å–≤—ñ—Ç–ª–∞
```

**–†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫:**
- –ü—ñ–¥—Ä–∞—Ö–æ–≤—É—î–º–æ –≥–æ–¥–∏–Ω–∏ –∑ `hourly_status === 'off'`
- –ö–æ–∂–µ–Ω –µ–ª–µ–º–µ–Ω—Ç = 30 —Ö–≤–∏–ª–∏–Ω
- –°–æ—Ä—Ç—É—î–º–æ –ø–æ –Ω–æ–º–µ—Ä—É —á–µ—Ä–≥–∏

### 6. –û–ø–∏—Å –≤—ñ–¥ –î–¢–ï–ö üí¨

```
üí¨ –£ –∑–≤'—è–∑–∫—É –∑—ñ —Å–∫–ª–∞–¥–Ω–æ—é —Å–∏—Ç—É–∞—Ü—ñ—î—é –≤ –µ–Ω–µ—Ä–≥–æ—Å–∏—Å—Ç–µ–º—ñ...
```

–ü–µ—Ä—à—ñ 150 —Å–∏–º–≤–æ–ª—ñ–≤ –æ–ø–∏—Å—É (—è–∫—â–æ –¥–æ–≤—à–µ - –¥–æ–¥–∞—î—Ç—å—Å—è `...`).

---

## –õ–æ–≥—ñ–∫–∞ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Ç–∏–ø—É

### isToday (–ì—Ä–∞—Ñ—ñ–∫ –Ω–∞ —Å—å–æ–≥–æ–¥–Ω—ñ)

```php
$isToday = $this->schedule->schedule_date->isToday();
```

–ü–µ—Ä–µ–≤—ñ—Ä—è—î, —á–∏ –¥–∞—Ç–∞ –≥—Ä–∞—Ñ—ñ–∫–∞ = —Å—å–æ–≥–æ–¥–Ω—ñ.

### isTomorrow (–ì—Ä–∞—Ñ—ñ–∫ –Ω–∞ –∑–∞–≤—Ç—Ä–∞)

```php
$isTomorrow = $this->schedule->schedule_date->isTomorrow();
```

–ü–µ—Ä–µ–≤—ñ—Ä—è—î, —á–∏ –¥–∞—Ç–∞ –≥—Ä–∞—Ñ—ñ–∫–∞ = –∑–∞–≤—Ç—Ä–∞.

### isUpdate (–û–Ω–æ–≤–ª–µ–Ω–Ω—è –≥—Ä–∞—Ñ—ñ–∫–∞)

```php
$isUpdate = PowerOutageSchedule::where('schedule_date', $this->schedule->schedule_date)
    ->where('id', '!=', $this->schedule->id)
    ->exists();
```

–ü–µ—Ä–µ–≤—ñ—Ä—è—î, —á–∏ –≤–∂–µ —î —ñ–Ω—à–∏–π –∑–∞–ø–∏—Å –∑ —Ç–∞–∫–æ—é –∂ –¥–∞—Ç–æ—é –≤ –ë–î.

---

## –ï–º–æ–¥–∑—ñ —Ç–∞ —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è

### –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞–Ω—ñ –µ–º–æ–¥–∑—ñ:

| –ï–º–æ–¥–∑—ñ | –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è |
|--------|-------------|
| üîÑ | –û–Ω–æ–≤–ª–µ–Ω–Ω—è –≥—Ä–∞—Ñ—ñ–∫–∞ |
| üîå | –ì—Ä–∞—Ñ—ñ–∫ –≤—ñ–¥–∫–ª—é—á–µ–Ω—å |
| üìÖ | –ù–æ–≤–∏–π –≥—Ä–∞—Ñ—ñ–∫ –Ω–∞ –∑–∞–≤—Ç—Ä–∞ |
| üóì | –î–∞—Ç–∞ |
| ‚ö†Ô∏è | –ü–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è –ø—Ä–æ –∑–º—ñ–Ω–∏ |
| ‚ú® | –ù–æ–≤–∏–π –≥—Ä–∞—Ñ—ñ–∫ |
| ‚è∞ | –ü–µ—Ä—ñ–æ–¥–∏ –≤—ñ–¥–∫–ª—é—á–µ–Ω—å |
| üìù | –î–∞—Ç–∞ –ø—É–±–ª—ñ–∫–∞—Ü—ñ—ó |
| üìä | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ |
| üí¨ | –û–ø–∏—Å/–∫–æ–º–µ–Ω—Ç–∞—Ä |

### HTML —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è:

```html
<b>–ñ–∏—Ä–Ω–∏–π —Ç–µ–∫—Å—Ç</b>
<i>–ö—É—Ä—Å–∏–≤</i>
```

Telegram –ø—ñ–¥—Ç—Ä–∏–º—É—î `parse_mode: 'HTML'`.

---

## –ü—Ä–∏–∫–ª–∞–¥–∏ —Ä–æ–±–æ—Ç–∏

### –°—Ü–µ–Ω–∞—Ä—ñ–π 1: –û–ø—É–±–ª—ñ–∫—É–≤–∞–≤—Å—è –≥—Ä–∞—Ñ—ñ–∫ –Ω–∞ —Å—å–æ–≥–æ–¥–Ω—ñ

```
12:00 ‚Üí –û—Ç—Ä–∏–º–∞–Ω–æ –≥—Ä–∞—Ñ—ñ–∫ –Ω–∞ 10.11.2025
        isToday = true
        isUpdate = false (–ø–µ—Ä—à–∏–π –∑–∞–ø–∏—Å)
        
        üì§ Telegram:
        üîå –ì—Ä–∞—Ñ—ñ–∫ –≤—ñ–¥–∫–ª—é—á–µ–Ω—å –Ω–∞ –°–¨–û–ì–û–î–ù–Ü
        üìÖ 10.11.2025 (–Ω–µ–¥—ñ–ª—è)
        ...
```

### –°—Ü–µ–Ω–∞—Ä—ñ–π 2: –ì—Ä–∞—Ñ—ñ–∫ –Ω–∞ —Å—å–æ–≥–æ–¥–Ω—ñ –∑–º—ñ–Ω–∏–≤—Å—è

```
14:00 ‚Üí –û—Ç—Ä–∏–º–∞–Ω–æ –æ–Ω–æ–≤–ª–µ–Ω–∏–π –≥—Ä–∞—Ñ—ñ–∫ –Ω–∞ 10.11.2025
        isToday = true
        isUpdate = true (–≤–∂–µ —î –∑–∞–ø–∏—Å)
        
        üì§ Telegram:
        üîÑ –û–ù–û–í–õ–ï–ù–ù–Ø –≥—Ä–∞—Ñ—ñ–∫–∞ –Ω–∞ –°–¨–û–ì–û–î–ù–Ü
        üìÖ 10.11.2025 (–Ω–µ–¥—ñ–ª—è)
        ‚ö†Ô∏è –ì—Ä–∞—Ñ—ñ–∫ –≤—ñ–¥–∫–ª—é—á–µ–Ω—å –∑–º—ñ–Ω–∏–≤—Å—è!
        ...
```

### –°—Ü–µ–Ω–∞—Ä—ñ–π 3: –û–ø—É–±–ª—ñ–∫—É–≤–∞–≤—Å—è –≥—Ä–∞—Ñ—ñ–∫ –Ω–∞ –∑–∞–≤—Ç—Ä–∞

```
19:00 ‚Üí –û—Ç—Ä–∏–º–∞–Ω–æ –≥—Ä–∞—Ñ—ñ–∫ –Ω–∞ 11.11.2025
        isToday = false
        isTomorrow = true
        
        üì§ Telegram:
        üìÖ –ù–û–í–ò–ô –≥—Ä–∞—Ñ—ñ–∫ –Ω–∞ –ó–ê–í–¢–†–ê
        üóì 11.11.2025 (–ø–æ–Ω–µ–¥—ñ–ª–æ–∫)
        ‚ú® –ì—Ä–∞—Ñ—ñ–∫ –Ω–∞ –∑–∞–≤—Ç—Ä–∞ –æ–ø—É–±–ª—ñ–∫–æ–≤–∞–Ω–æ!
        ...
```

---

## –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ —Ç—Ä–∏–≤–∞–ª–æ—Å—Ç—ñ

### calculateDuration()

```php
protected function calculateDuration(string $from, string $to): string
{
    $start = Carbon::createFromFormat('H:i', $from);
    $end = Carbon::createFromFormat('H:i', $to);
    
    if ($end->lessThan($start)) {
        $end->addDay(); // –ü–µ—Ä—ñ–æ–¥ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –Ω–∞ –Ω–∞—Å—Ç—É–ø–Ω–∏–π –¥–µ–Ω—å
    }
    
    $diff = $start->diff($end);
    $hours = $diff->h;
    $minutes = $diff->i;
    
    if ($minutes > 0) {
        return "{$hours} –≥–æ–¥ {$minutes} —Ö–≤";
    }
    
    return "{$hours} –≥–æ–¥";
}
```

**–ü—Ä–∏–∫–ª–∞–¥–∏:**
- `07:00 - 16:00` ‚Üí "9 –≥–æ–¥"
- `23:30 - 01:00` ‚Üí "1 –≥–æ–¥ 30 —Ö–≤" (–Ω–∞—Å—Ç—É–ø–Ω–∏–π –¥–µ–Ω—å)
- `12:00 - 18:30` ‚Üí "6 –≥–æ–¥ 30 —Ö–≤"

---

## –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

### getQueueStatistics()

```php
protected function getQueueStatistics(): array
{
    $stats = [];
    
    foreach ($this->schedule->schedule_data as $queueData) {
        $queueNumber = $queueData['subqueue'] ?? $queueData['queue'];
        $hourlyStatus = $queueData['hourly_status'] ?? [];
        
        $hoursOff = 0;
        foreach ($hourlyStatus as $status) {
            if ($status === 'off') {
                $hoursOff += 0.5; // 30 —Ö–≤–∏–ª–∏–Ω
            }
        }
        
        if ($hoursOff > 0) {
            $stats[$queueNumber] = ['hours_off' => $hoursOff];
        }
    }
    
    ksort($stats); // –°–æ—Ä—Ç—É–≤–∞–Ω–Ω—è –ø–æ –Ω–æ–º–µ—Ä—É —á–µ—Ä–≥–∏
    
    return $stats;
}
```

**–ü—Ä–∏–∫–ª–∞–¥ –¥–∞–Ω–∏—Ö:**
```php
[
    '1' => ['hours_off' => 8.5],
    '2' => ['hours_off' => 12.0],
    '3' => ['hours_off' => 6.5],
]
```

---

## –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### –†—É—á–Ω–∞ –≤—ñ–¥–ø—Ä–∞–≤–∫–∞ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è:

```bash
php artisan tinker
>>> $schedule = App\Models\PowerOutageSchedule::latest()->first();
>>> App\Jobs\SendPowerOutageNotification::dispatchSync($schedule);
```

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è:

```bash
php artisan tinker
>>> $schedule = App\Models\PowerOutageSchedule::latest()->first();
>>> $job = new App\Jobs\SendPowerOutageNotification($schedule);
>>> echo (new ReflectionClass($job))->getMethod('formatCaption')->invoke($job);
```

---

## –û–±–º–µ–∂–µ–Ω–Ω—è

### –î–æ–≤–∂–∏–Ω–∞ –æ–ø–∏—Å—É

–û–±–º–µ–∂–µ–Ω–æ –¥–æ **150 —Å–∏–º–≤–æ–ª—ñ–≤**, —â–æ–± –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –Ω–µ –±—É–ª–æ –∑–∞–¥–æ–≤–≥–∏–º:

```php
$shortDescription = mb_substr($this->schedule->description, 0, 150);
if (mb_strlen($this->schedule->description) > 150) {
    $shortDescription .= '...';
}
```

### –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ –¥–æ–≤–∂–∏–Ω–∞ caption –≤ Telegram

Telegram –¥–æ–∑–≤–æ–ª—è—î –¥–æ **1024 —Å–∏–º–≤–æ–ª—ñ–≤** –¥–ª—è caption –ø—ñ–¥ —Ñ–æ—Ç–æ.

–ù–∞—à–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑–∞–∑–≤–∏—á–∞–π ~300-500 —Å–∏–º–≤–æ–ª—ñ–≤ - —Ü–µ –≤ –º–µ–∂–∞—Ö –Ω–æ—Ä–º–∏.

---

## –ü—ñ–¥—Å—É–º–æ–∫

‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Ç–∏–ø—É –≥—Ä–∞—Ñ—ñ–∫–∞  
‚úÖ –†—ñ–∑–Ω—ñ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö —Å–∏—Ç—É–∞—Ü—ñ–π  
‚úÖ –ü–æ–≤–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –ø–µ—Ä—ñ–æ–¥–∏  
‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–æ–∂–Ω—ñ–π —á–µ—Ä–∑—ñ  
‚úÖ –î–∞—Ç–∞ –ø—É–±–ª—ñ–∫–∞—Ü—ñ—ó –≤—ñ–¥ –î–¢–ï–ö  
‚úÖ –û–ø–∏—Å –∑ –æ–±–º–µ–∂–µ–Ω–Ω—è–º –¥–æ–≤–∂–∏–Ω–∏  
‚úÖ HTML —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è  
‚úÖ –ï–º–æ–¥–∑—ñ –¥–ª—è –∫—Ä–∞—â–æ–≥–æ —Å–ø—Ä–∏–π–Ω—è—Ç—Ç—è  

**–§–∞–π–ª:** `app/Jobs/SendPowerOutageNotification.php`  
**–í–µ—Ä—Å—ñ—è:** 2.1.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü—Ä–∞—Ü—é—î

