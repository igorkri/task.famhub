# üñºÔ∏è –ì—Ä–∞—Ñ—ñ–∫ –≤—ñ–¥–∫–ª—é—á–µ–Ω—å —É –≤–∏–≥–ª—è–¥—ñ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è

## –©–æ –∑–º—ñ–Ω–∏–ª–æ—Å—è

–¢–µ–ø–µ—Ä –∑–∞–º—ñ—Å—Ç—å —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤ Telegram –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è **–∫—Ä–∞—Å–∏–≤–∞ –∫–∞—Ä—Ç–∏–Ω–∫–∞** –∑ —Ç–∞–±–ª–∏—Ü–µ—é –≥—Ä–∞—Ñ—ñ–∫—É –≤—ñ–¥–∫–ª—é—á–µ–Ω—å!

## –ü—Ä–∏–∫–ª–∞–¥

–í–∏ –æ—Ç—Ä–∏–º—É—î—Ç–µ:
- üì∏ **–ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è** –∑ –∫–æ–ª—å–æ—Ä–æ–≤–æ—é —Ç–∞–±–ª–∏—Ü–µ—é
- üìù **–ü—ñ–¥–ø–∏—Å** –∑ –æ—Å–Ω–æ–≤–Ω–æ—é —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—î—é (–¥–∞—Ç–∞, –ø–µ—Ä—ñ–æ–¥–∏)

### –ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è –º—ñ—Å—Ç–∏—Ç—å:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –ì—Ä–∞—Ñ—ñ–∫ –≤—ñ–¥–∫–ª—é—á–µ–Ω—å - 09.11.2025                 ‚îÇ
‚îÇ –û–Ω–æ–≤–ª–µ–Ω–æ: 16:27                                 ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚î§
‚îÇ     ‚îÇ00‚îÇ01‚îÇ02‚îÇ03‚îÇ04‚îÇ05‚îÇ06‚îÇ07‚îÇ08‚îÇ09‚îÇ10‚îÇ11‚îÇ...‚îÇ23‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚î§
‚îÇ1.1  ‚îÇüü¢‚îÇüü¢‚îÇüü¢‚îÇüü¢‚îÇüü¢‚îÇüü¢‚îÇüü¢‚îÇüî¥‚îÇüî¥‚îÇüî¥‚îÇüî¥‚îÇüî¥‚îÇ...‚îÇüü¢‚îÇ
‚îÇ1.2  ‚îÇüü¢‚îÇüü¢‚îÇüü¢‚îÇüü¢‚îÇüü¢‚îÇüü¢‚îÇüü¢‚îÇüü¢‚îÇüü°‚îÇüî¥‚îÇüî¥‚îÇüî¥‚îÇ...‚îÇüü°‚îÇ
‚îÇ2.1  ‚îÇüü¢‚îÇüü¢‚îÇüü¢‚îÇüü¢‚îÇüü¢‚îÇüü¢‚îÇüü°‚îÇüü°‚îÇüî¥‚îÇüî¥‚îÇüî¥‚îÇüî¥‚îÇ...‚îÇüü¢‚îÇ
‚îÇ2.2  ‚îÇüü¢‚îÇüü¢‚îÇüü¢‚îÇüü¢‚îÇüü¢‚îÇüü¢‚îÇüü¢‚îÇüü¢‚îÇüü¢‚îÇüü°‚îÇüü°‚îÇüî¥‚îÇ...‚îÇüü¢‚îÇ
‚îÇ...  ‚îÇ..‚îÇ..‚îÇ..‚îÇ..‚îÇ..‚îÇ..‚îÇ..‚îÇ..‚îÇ..‚îÇ..‚îÇ..‚îÇ..‚îÇ...‚îÇ..‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îò

–õ–µ–≥–µ–Ω–¥–∞:
üü¢ –°–≤—ñ—Ç–ª–æ —î  üî¥ –í–∏–º–∫–Ω–µ–Ω–æ  üü° –ú–æ–∂–ª–∏–≤–æ
```

## –ü–µ—Ä–µ–≤–∞–≥–∏

### ‚úÖ –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è
- **–ö–æ–ª—å–æ—Ä–æ–≤–∞ —Ç–∞–±–ª–∏—Ü—è** - –æ–¥—Ä–∞–∑—É –≤–∏–¥–Ω–æ –≤—Å—ñ –≥–æ–¥–∏–Ω–∏ –¥–æ–±–∏
- **–õ–µ–≥–µ–Ω–¥–∞** - –ø–æ—è—Å–Ω–µ–Ω–Ω—è –∫–æ–ª—å–æ—Ä—ñ–≤ –≤–Ω–∏–∑—É
- **–ß–∞—Å –æ–Ω–æ–≤–ª–µ–Ω–Ω—è** - –∫–æ–ª–∏ –æ—Ç—Ä–∏–º–∞–Ω–æ –¥–∞–Ω—ñ

### ‚úÖ –ó—Ä—É—á–Ω—ñ—Å—Ç—å
- **–ó–±–µ—Ä–µ–∂—ñ—Ç—å –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è** - –º–æ–∂–Ω–∞ –∑–±–µ—Ä–µ–≥—Ç–∏ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω
- **–ü–æ–¥—ñ–ª—ñ—Ç—å—Å—è** - –ª–µ–≥–∫–æ –ø–µ—Ä–µ—Å–ª–∞—Ç–∏ —ñ–Ω—à–∏–º
- **–†–æ–∑–¥—Ä—É–∫—É–π—Ç–µ** - –º–æ–∂–Ω–∞ —Ä–æ–∑–¥—Ä—É–∫—É–≤–∞—Ç–∏ —Ç–∞ –ø–æ–≤—ñ—Å–∏—Ç–∏ –Ω–∞ —Å—Ç—ñ–Ω—É

### ‚úÖ –®–≤–∏–¥–∫–æ
- **–û–¥–∏–Ω –ø–æ–≥–ª—è–¥** - –±–∞—á–∏—Ç–µ –≤–µ—Å—å –¥–µ–Ω—å
- **–ó–Ω–∞–π–¥—ñ—Ç—å —á–∞—Å** - —à–≤–∏–¥–∫–æ –∑–Ω–∞–π—Ç–∏ –ø–æ—Ç—Ä—ñ–±–Ω—É –≥–æ–¥–∏–Ω—É
- **–ü–æ—Ä—ñ–≤–Ω—è–π—Ç–µ —á–µ—Ä–≥–∏** - –≤—Å—ñ —á–µ—Ä–≥–∏ –≤ –æ–¥–Ω—ñ–π —Ç–∞–±–ª–∏—Ü—ñ

## –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ

### –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è:
- **GD Library** (PHP) - –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –∑–æ–±—Ä–∞–∂–µ–Ω—å
- **PNG —Ñ–æ—Ä–º–∞—Ç** - –≤–∏—Å–æ–∫–∞ —è–∫—ñ—Å—Ç—å, –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ –∫–æ–ª—å–æ—Ä—ñ–≤
- **Telegram Photo API** - –≤—ñ–¥–ø—Ä–∞–≤–∫–∞ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∑ –ø—ñ–¥–ø–∏—Å–æ–º

### –†–æ–∑–º—ñ—Ä–∏:
- **–®–∏—Ä–∏–Ω–∞**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Ä–æ–∑—Ä–∞—Ö–æ–≤—É—î—Ç—å—Å—è (24 –≥–æ–¥–∏–Ω–∏ + –ø—ñ–¥–ø–∏—Å–∏)
- **–í–∏—Å–æ—Ç–∞**: –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –∫—ñ–ª—å–∫–æ—Å—Ç—ñ —á–µ—Ä–≥
- **–†–æ–∑–º—ñ—Ä –∫–ª—ñ—Ç–∏–Ω–∫–∏**: 60x40 –ø—ñ–∫—Å–µ–ª—ñ–≤
- **–†–æ–∑–º—ñ—Ä —Ñ–∞–π–ª—É**: ~50-100 –ö–ë

### –ö–æ–ª—å–æ—Ä–∏:
- üü¢ **–ó–µ–ª–µ–Ω–∏–π (76, 175, 80)** - –°–≤—ñ—Ç–ª–æ —î
- üî¥ **–ß–µ—Ä–≤–æ–Ω–∏–π (244, 67, 54)** - –í–∏–º–∫–Ω–µ–Ω–æ
- üü° **–ñ–æ–≤—Ç–∏–π (255, 193, 7)** - –ú–æ–∂–ª–∏–≤–æ –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è

## –Ø–∫ –ø—Ä–∞—Ü—é—î

### 1. –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è

```php
PowerOutageImageGenerator::generate($schedule)
```

–°—Ç–≤–æ—Ä—é—î PNG –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∑:
- –ó–∞–≥–æ–ª–æ–≤–∫–æ–º (–¥–∞—Ç–∞ + —á–∞—Å –æ–Ω–æ–≤–ª–µ–Ω–Ω—è)
- –¢–∞–±–ª–∏—Ü–µ—é –∑ –≥–æ–¥–∏–Ω–∞–º–∏ (00-23)
- –†—è–¥–∫–∞–º–∏ –¥–ª—è –∫–æ–∂–Ω–æ—ó –ø—ñ–¥–≥—Ä—É–ø–∏
- –ö–æ–ª—å–æ—Ä–æ–≤–∏–º–∏ –∫–ª—ñ—Ç–∏–Ω–∫–∞–º–∏ —Å—Ç–∞—Ç—É—Å—ñ–≤
- –õ–µ–≥–µ–Ω–¥–æ—é –≤–Ω–∏–∑—É

### 2. –í—ñ–¥–ø—Ä–∞–≤–∫–∞ –≤ Telegram

```php
Http::attach('photo', $image, 'schedule.png')
    ->post("sendPhoto", [
        'caption' => '–ü—ñ–¥–ø–∏—Å –∑ –ø–µ—Ä—ñ–æ–¥–∞–º–∏'
    ])
```

### 3. –û—á–∏—â–µ–Ω–Ω—è

–¢–∏–º—á–∞—Å–æ–≤–∏–π —Ñ–∞–π–ª –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–¥–∞–ª—è—î—Ç—å—Å—è –ø—ñ—Å–ª—è –≤—ñ–¥–ø—Ä–∞–≤–∫–∏.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª—ñ–≤

```
app/Services/
‚îî‚îÄ‚îÄ PowerOutageImageGenerator.php  ‚Üê –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∑–æ–±—Ä–∞–∂–µ–Ω—å

app/Jobs/
‚îî‚îÄ‚îÄ SendPowerOutageNotification.php ‚Üê –í—ñ–¥–ø—Ä–∞–≤–∫–∞ –≤ Telegram

storage/app/temp/
‚îî‚îÄ‚îÄ power_outage_*.png             ‚Üê –¢–∏–º—á–∞—Å–æ–≤—ñ —Ñ–∞–π–ª–∏ (–∞–≤—Ç–æ-–≤–∏–¥–∞–ª–µ–Ω–Ω—è)
```

## –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### –í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è–º

```bash
# –í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –æ—Å—Ç–∞–Ω–Ω—ñ–π –≥—Ä–∞—Ñ—ñ–∫
php artisan power:notify

# –û—Ç—Ä–∏–º–∞—Ç–∏ –Ω–æ–≤–∏–π –≥—Ä–∞—Ñ—ñ–∫ —ñ –≤—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏
php artisan power:fetch-schedule --notify
```

### –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

```bash
# –®–≤–∏–¥–∫–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
./scripts/test-table-format.sh

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ª–æ–≥–∏
tail -f storage/logs/laravel.log | grep "Power outage"
```

## –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

–ú–æ–∂–Ω–∞ –∑–º—ñ–Ω–∏—Ç–∏ —Ä–æ–∑–º—ñ—Ä–∏ —Ç–∞ –∫–æ–ª—å–æ—Ä–∏ –≤ `PowerOutageImageGenerator.php`:

```php
protected int $cellWidth = 60;    // –®–∏—Ä–∏–Ω–∞ –∫–ª—ñ—Ç–∏–Ω–∫–∏
protected int $cellHeight = 40;   // –í–∏—Å–æ—Ç–∞ –∫–ª—ñ—Ç–∏–Ω–∫–∏
protected int $fontSize = 12;     // –†–æ–∑–º—ñ—Ä —à—Ä–∏—Ñ—Ç—É
protected int $padding = 20;      // –í—ñ–¥—Å—Ç—É–ø–∏

// –ö–æ–ª—å–æ—Ä–∏
$green = imagecolorallocate($image, 76, 175, 80);
$red = imagecolorallocate($image, 244, 67, 54);
$yellow = imagecolorallocate($image, 255, 193, 7);
```

## –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è —Ñ–æ—Ä–º–∞—Ç—ñ–≤

### –¢–µ–∫—Å—Ç–æ–≤–∏–π —Ñ–æ—Ä–º–∞—Ç (—Å—Ç–∞—Ä–∏–π)
‚ùå –ë–∞–≥–∞—Ç–æ —Ç–µ–∫—Å—Ç—É  
‚ùå –í–∞–∂–∫–æ —á–∏—Ç–∞—Ç–∏  
‚ùå –ù–µ –º–æ–∂–Ω–∞ –∑–±–µ—Ä–µ–≥—Ç–∏ —è–∫ –∫–∞—Ä—Ç–∏–Ω–∫—É  
‚úÖ –®–≤–∏–¥—à–µ –≥–µ–Ω–µ—Ä—É—î—Ç—å—Å—è  

### –ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è (–Ω–æ–≤–∏–π)
‚úÖ –í—ñ–∑—É–∞–ª—å–Ω–æ –∑—Ä–æ–∑—É–º—ñ–ª–æ  
‚úÖ –õ–µ–≥–∫–æ —á–∏—Ç–∞—Ç–∏  
‚úÖ –ú–æ–∂–Ω–∞ –∑–±–µ—Ä–µ–≥—Ç–∏/–Ω–∞–¥—Ä—É–∫—É–≤–∞—Ç–∏  
‚úÖ –ö—Ä–∞—Å–∏–≤–æ –≤–∏–≥–ª—è–¥–∞—î  
‚ùå –ü–æ—Ç—Ä—ñ–±–Ω–æ –±—ñ–ª—å—à–µ —Ä–µ—Å—É—Ä—Å—ñ–≤ (–∞–ª–µ —Ü–µ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ)  

## Troubleshooting

### –ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è –Ω–µ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è

1. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ GD extension:**
   ```bash
   php -m | grep gd
   ```

2. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ –ø–∞–ø–∫—É:**
   ```bash
   chmod 755 storage/app/temp
   ```

3. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏:**
   ```bash
   tail -f storage/logs/laravel.log
   ```

### –ü–æ–≥–∞–Ω–∞ —è–∫—ñ—Å—Ç—å –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è

–ó–±—ñ–ª—å—à—ñ—Ç—å —Ä–æ–∑–º—ñ—Ä–∏ –∫–ª—ñ—Ç–∏–Ω–æ–∫:
```php
protected int $cellWidth = 80;   // –±—É–ª–æ 60
protected int $cellHeight = 50;  // –±—É–ª–æ 40
```

### –ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∑–∞–Ω–∞–¥—Ç–æ –≤–µ–ª–∏–∫–µ

–ó–º–µ–Ω—à—ñ—Ç—å —Ä–æ–∑–º—ñ—Ä–∏ –∞–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ JPEG –∑–∞–º—ñ—Å—Ç—å PNG:
```php
imagejpeg($image, $filename, 85); // 85 - —è–∫—ñ—Å—Ç—å
```

## –ú–∞–π–±—É—Ç–Ω—ñ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è

–ú–æ–∂–Ω–∞ –¥–æ–¥–∞—Ç–∏:
- üé® –í–∏–±—ñ—Ä –∫–æ–ª—å–æ—Ä–æ–≤–æ—ó —Ç–µ–º–∏ (—Ç–µ–º–Ω–∞/—Å–≤—ñ—Ç–ª–∞)
- üî§ –†—ñ–∑–Ω—ñ —à—Ä–∏—Ñ—Ç–∏ (TrueType fonts)
- üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –≤–Ω–∏–∑—É (—Å–∫—ñ–ª—å–∫–∏ –≥–æ–¥–∏–Ω —Å–≤—ñ—Ç–ª–∞/–≤—ñ–¥–∫–ª—é—á–µ–Ω—å)
- üåê –ü–µ—Ä–µ–∫–ª–∞–¥–∏ (UA/RU/EN)
- üì± –ê–¥–∞–ø—Ç–∞—Ü—ñ—è –ø—ñ–¥ —Ä–æ–∑–º—ñ—Ä –µ–∫—Ä–∞–Ω—É

---

**–ì–æ—Ç–æ–≤–æ!** –¢–µ–ø–µ—Ä –≥—Ä–∞—Ñ—ñ–∫–∏ –≤—ñ–¥–∫–ª—é—á–µ–Ω—å –ø—Ä–∏—Ö–æ–¥—è—Ç—å –∫—Ä–∞—Å–∏–≤–∏–º–∏ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è–º–∏! üé®‚ú®

