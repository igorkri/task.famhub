# ✅ Виправлення проблеми з кирилицею в зображеннях

## Проблема

При генерації зображення з графіком відключень кирилиця відображалась некоректно - замість українського тексту показувались незрозумілі символи.

**Причина:** GD Library використовує вбудовані растрові шрифти, які підтримують тільки ASCII символи (Latin).

## Рішення

Використовуємо **транслітерацію** - замінюємо кирилицю на латиницю для всіх текстових підписів.

### Що змінилось:

**Було:**
- "Графік відключень" → ?????????
- "Оновлено" → ????????
- "Світло є" → ???????
- "Вимкнено" → ????????
- "Можливо" → ???????

**Стало:**
- "Grafik vidklyuchen"
- "Onovleno"
- "Svitlo ye"
- "Vymkneno"
- "Mozhlyvo"

## Альтернативні рішення (для майбутнього)

### 1. Використання TrueType шрифтів

Встановити шрифт з підтримкою кирилиці:

```bash
sudo apt-get install fonts-dejavu-core
```

Та використовувати `imagettftext()` замість `imagestring()`:

```php
$fontPath = '/usr/share/fonts/truetype/dejavu/DejaVuSans.ttf';
imagettftext($image, 12, 0, $x, $y, $color, $fontPath, 'Текст кирилицею');
```

### 2. Використання бібліотеки Intervention Image

Встановити через Composer:

```bash
composer require intervention/image
```

Має кращу підтримку шрифтів та UTF-8.

### 3. Генерація SVG замість PNG

SVG підтримує UTF-8 нативно, можна використовувати будь-які шрифти.

## Поточна реалізація

### Переваги транслітерації:
✅ Працює без додаткових залежностей  
✅ Швидко генерується  
✅ Малий розмір файлу  
✅ Читабельно (латиниця зрозуміла українцям)  

### Недоліки:
❌ Не оригінальний текст  
❌ Може бути незвично  

## Приклад зображення

```
┌──────────────────────────────────┐
│ Grafik vidklyuchen - 09.11.2025 │
│ Onovleno: 16:30                  │
├─────┬──┬──┬──┬──┬──┬──┬──────────┤
│     │00│01│02│...│21│22│23      │
├─────┼──┼──┼──┼──┼──┼──┼──────────┤
│1.1  │🟢│🟢│🟢│...│🟢│🔴│🟡      │
│1.2  │🟢│🟢│🟢│...│🟡│🔴│🔴      │
└─────┴──┴──┴──┴──┴──┴──┴──────────┘

Svitlo ye  Vymkneno  Mozhlyvo
   🟢         🔴        🟡
```

## Тестування

```bash
# Відправити нове зображення
php artisan power:notify

# Перевірити результат в Telegram
```

Тепер зображення буде з читабельним латинським текстом!

## Файли

- `app/Services/PowerOutageImageGenerator.php` - Генератор зображень
- Використовуються латинські назви для всіх текстів

---

**Виправлено!** Тепер текст на зображенні читабельний! ✅

