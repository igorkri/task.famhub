# Changelog - Система мониторинга отключений

## [1.1.0] - 2025-11-09

### Улучшения

- **Правильная генерация hash:** Hash теперь генерируется только из `schedule_data`, а не из всех данных. Это позволяет точно определять реальные изменения в графике отключений, игнорируя незначительные изменения в описании или времени получения данных.

- **Улучшенная обработка ошибок:**
  - Добавлена проверка на пустой HTML ответ
  - Информативные сообщения об ошибках
  - Обработка случаев, когда данные для даты еще не доступны

- **Дополнительные тесты:**
  - Тест на пустой HTML
  - Тест на HTML только с пробелами
  - Тест обработки пустого ответа от сервера
  - Всего 10 тестов (все проходят)

### Исправления

- Исправлена ошибка `ValueError: DOMDocument::loadHTML(): Argument #1 ($source) must not be empty`
- Теперь команда корректно обрабатывает случаи, когда данные для будущих дат еще не доступны

### Технические детали

**До:**
```php
$hash = $parser->generateHash($parsedData);
```

**После:**
```php
$hash = $parser->generateHash($parsedData['schedule_data']);
```

Это изменение гарантирует, что:
- Уведомления отправляются только при реальных изменениях в графике
- Не создаются дубликаты записей при незначительных изменениях описания
- Система работает более стабильно и предсказуемо

## [1.0.0] - 2025-11-09

### Первый релиз

- Автоматическое получение данных каждые 10 минут
- Парсинг HTML в структурированные данные
- Сохранение в базу данных
- Уведомления в Telegram
- Полная документация
- Тестовое покрытие

