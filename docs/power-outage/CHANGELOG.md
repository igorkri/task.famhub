# Changelog - –°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∏–π

## [2.1.0] - 2025-11-10

### üìÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≥—Ä–∞—Ñ—ñ–∫–∞ –Ω–∞ –Ω–∞—Å—Ç—É–ø–Ω–∏–π –¥–µ–Ω—å

**–î–æ–¥–∞–Ω–æ –∑–∞–≤–¥–∞–Ω–Ω—è –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –≥—Ä–∞—Ñ—ñ–∫–∞ –Ω–∞ –Ω–∞—Å—Ç—É–ø–Ω–∏–π –¥–µ–Ω—å:**

- –í–∏–ø–∞–¥–∫–æ–≤–∏–π —ñ–Ω—Ç–µ—Ä–≤–∞–ª –≤—ñ–¥ 30 –¥–æ 60 —Ö–≤–∏–ª–∏–Ω
- –ë–∞–∑–æ–≤–∞ —á–∞—Å—Ç–æ—Ç–∞: –∫–æ–∂–Ω—ñ 30 —Ö–≤–∏–ª–∏–Ω
- –†–∞–Ω–¥–æ–º—ñ–∑–∞—Ü—ñ—è: –ø—Ä–æ–ø—É—Å–∫ –∑ –≤—ñ—Ä–æ–≥—ñ–¥–Ω—ñ—Å—Ç—é 50%
- –°–µ—Ä–µ–¥–Ω—ñ–π —ñ–Ω—Ç–µ—Ä–≤–∞–ª: ~45 —Ö–≤–∏–ª–∏–Ω

**–ü–µ—Ä–µ–≤–∞–≥–∏:**
- ‚úÖ –ó–∞–≤—á–∞—Å–Ω–µ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ –º–∞–π–±—É—Ç–Ω—ñ –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –ø—Ä–∏ –ø—É–±–ª—ñ–∫–∞—Ü—ñ—ó –≥—Ä–∞—Ñ—ñ–∫–∞
- ‚úÖ –í–∏–ø–∞–¥–∫–æ–≤–∏–π —ñ–Ω—Ç–µ—Ä–≤–∞–ª –¥–ª—è —É–Ω–∏–∫–Ω–µ–Ω–Ω—è –ø–µ—Ä–µ–¥–±–∞—á—É–≤–∞–Ω–∏—Ö patterns
- ‚úÖ –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π —Ç—Ä–∞—Ñ—ñ–∫ –∑–∞–≤–¥—è–∫–∏ API –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó

**–¢–µ—Ö–Ω—ñ—á–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è:**
```php
Schedule::call(function () {
    Artisan::call('power:fetch-schedule', [
        'date' => now()->addDay()->format('d-m-Y'),
    ]);
})
    ->cron('*/30 * * * *')
    ->skip(function () { return rand(0, 1) === 0; })
    ->name('power:fetch-schedule-next-day')
    ->withoutOverlapping()
    ->onOneServer();
```

**–§–∞–π–ª–∏:**
- `routes/console.php` - –¥–æ–¥–∞–Ω–æ –Ω–æ–≤–µ –∑–∞–≤–¥–∞–Ω–Ω—è
- `docs/power-outage/NEXT-DAY-SCHEDULE.md` - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
- –ü–µ—Ä–µ–≤—ñ—Ä–æ–∫ –∑–∞ –¥–µ–Ω—å: ~24 (–∑ —Ä–∞–Ω–¥–æ–º—ñ–∑–∞—Ü—ñ—î—é)
- –¢—Ä–∞—Ñ—ñ–∫ –¥–æ –ø—É–±–ª—ñ–∫–∞—Ü—ñ—ó: ~48 KB/–¥–µ–Ω—å
- –ï–∫–æ–Ω–æ–º—ñ—è –ø–æ—Ä—ñ–≤–Ω—è–Ω–æ –∑ —Ñ—ñ–∫—Å–æ–≤–∞–Ω–∏–º —ñ–Ω—Ç–µ—Ä–≤–∞–ª–æ–º: ~50%

---

## [2.0.0] - 2025-11-10

### üöÄ –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è API –∑–∞–ø–∏—Ç—ñ–≤ (–µ–∫–æ–Ω–æ–º—ñ—è 96% —Ç—Ä–∞—Ñ—ñ–∫—É)

**–î–≤–æ–µ—Ç–∞–ø–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏:**

1. **–õ–µ–≥–∫–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞** —á–µ—Ä–µ–∑ `unloading-info.php` (JSON, ~2 KB)
   - –û—Ç—Ä–∏–º—É—î–º–æ –º–µ—Ç–∞–¥–∞–Ω—ñ –∑ –ø–æ–ª–µ–º `createddate`
   - –ü–æ—Ä—ñ–≤–Ω—é—î–º–æ –∑ –¥–∞—Ç–æ—é –≤ –ë–î
   - –ü—Ä–æ–ø—É—Å–∫–∞—î–º–æ HTML, —è–∫—â–æ –¥–∞—Ç–∞ –Ω–µ –∑–º—ñ–Ω–∏–ª–∞—Å—è

2. **–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è HTML** —Ç—ñ–ª—å–∫–∏ –ø—Ä–∏ –∑–º—ñ–Ω–∞—Ö
   - –ó–∞–ø–∏—Ç –¥–æ `newgpv-info.php` –ª–∏—à–µ —è–∫—â–æ `createddate` –∑–º—ñ–Ω–∏–ª–∞—Å—è
   - –ï–∫–æ–Ω–æ–º—ñ—è ~96% —Ç—Ä–∞—Ñ—ñ–∫—É

**–î–æ–¥–∞–Ω–æ:**
- –ó–∞–ø–∏—Ç –¥–æ `unloading-info.php` API
- –ü–æ–ª–µ `metadata` –≤ —Ç–∞–±–ª–∏—Ü—ñ `power_outage_schedules`
- –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è `created_date` –∑ API
- –ú–µ—Ç–æ–¥ `getBrowserHeaders()` –¥–ª—è —Ü–µ–Ω—Ç—Ä–∞–ª—ñ–∑–∞—Ü—ñ—ó –∑–∞–≥–æ–ª–æ–≤–∫—ñ–≤
- Fallback –ª–æ–≥—ñ–∫–∞ –ø—Ä–∏ –ø–æ–º–∏–ª–∫–∞—Ö API

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
- –¢—Ä–∞—Ñ—ñ–∫ –∑–∞ –¥–µ–Ω—å: 28.8 MB ‚Üí 1.1 MB (‚Üì96%)
- –¢—Ä–∞—Ñ—ñ–∫ –∑–∞ –º—ñ—Å—è—Ü—å: 864 MB ‚Üí 33 MB (‚Üì96%)
- –®–≤–∏–¥–∫—ñ—Å—Ç—å –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏: 2-3 —Å–µ–∫ ‚Üí 0.3-0.5 —Å–µ–∫ (‚Üë6-10x)
- –ó–∞–ø–∏—Ç—ñ–≤ –¥–æ HTML: 480/–¥–µ–Ω—å ‚Üí ~2/–¥–µ–Ω—å (‚Üì99%)

**–¢–µ—Ö–Ω—ñ—á–Ω—ñ –∑–º—ñ–Ω–∏:**
- `app/Console/Commands/FetchPowerOutageSchedule.php` - –¥–æ–¥–∞–Ω–æ –¥–≤–æ–µ—Ç–∞–ø–Ω—É –ø–µ—Ä–µ–≤—ñ—Ä–∫—É
- `app/Models/PowerOutageSchedule.php` - –¥–æ–¥–∞–Ω–æ `metadata` –¥–æ fillable —Ç–∞ casts
- `database/migrations/2025_11_10_110200_add_metadata_to_power_outage_schedules_table.php` - –Ω–æ–≤–∞ –º—ñ–≥—Ä–∞—Ü—ñ—è

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è:**
- `docs/power-outage/API-OPTIMIZATION.md` - –¥–µ—Ç–∞–ª—å–Ω–∏–π –æ–ø–∏—Å –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó

---

### üîê HTTP –∑–∞–≥–æ–ª–æ–≤–∫–∏ –¥–ª—è —ñ–º—ñ—Ç–∞—Ü—ñ—ó –±—Ä–∞—É–∑–µ—Ä–∞

**–î–æ–¥–∞–Ω–æ —Ä–µ–∞–ª—ñ—Å—Ç–∏—á–Ω—ñ –∑–∞–≥–æ–ª–æ–≤–∫–∏:**
- User-Agent (Chrome 130 –Ω–∞ Windows 10)
- Accept-Language (—É–∫—Ä–∞—ó–Ω—Å—å–∫–∞ –º–æ–≤–∞ –≤ –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç—ñ)
- Referer (–∑–∞–ø–∏—Ç –∑ —Å–∞–π—Ç—É –î–¢–ï–ö)
- Sec-Fetch-* –∑–∞–≥–æ–ª–æ–≤–∫–∏
- Timeout 30 —Å–µ–∫ + 3 retry —Å–ø—Ä–æ–±–∏

**–ü–µ—Ä–µ–≤–∞–≥–∏:**
- –ú—ñ–Ω—ñ–º—ñ–∑–∞—Ü—ñ—è —Ä–∏–∑–∏–∫—É –±–ª–æ–∫—É–≤–∞–Ω–Ω—è
- –ó–∞–ø–∏—Ç–∏ –≤–∏–≥–ª—è–¥–∞—é—Ç—å —è–∫ –≤—ñ–¥ –∑–≤–∏—á–∞–π–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ gzip, deflate, brotli —Å—Ç–∏—Å–Ω–µ–Ω–Ω—è

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è:**
- `docs/power-outage/HTTP-HEADERS.md` - –æ–ø–∏—Å –≤—Å—ñ—Ö –∑–∞–≥–æ–ª–æ–≤–∫—ñ–≤

---

### ‚ö° –ó–º—ñ–Ω–∞ —ñ–Ω—Ç–µ—Ä–≤–∞–ª—É –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏

**–ó–º—ñ–Ω–µ–Ω–æ:** 10 —Ö–≤–∏–ª–∏–Ω ‚Üí 3 —Ö–≤–∏–ª–∏–Ω–∏

- `routes/console.php`: `everyTenMinutes()` ‚Üí `everyThreeMinutes()`
- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≥—Ä–∞—Ñ—ñ–∫–∞ 20 —Ä–∞–∑—ñ–≤ –Ω–∞ –≥–æ–¥–∏–Ω—É –∑–∞–º—ñ—Å—Ç—å 6
- –®–≤–∏–¥—à–µ –≤–∏—è–≤–ª–µ–Ω–Ω—è –∑–º—ñ–Ω

---

### üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

**–°—Ç–≤–æ—Ä–µ–Ω–æ –Ω–æ–≤—ñ —Ñ–∞–π–ª–∏:**
- `AUTO-SCHEDULE-SETUP.md` - –¥–µ—Ç–∞–ª—å–Ω–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫—É
- `AUTO-SCHEDULE-QUICKREF.md` - —à–≤–∏–¥–∫–∏–π –¥–æ–≤—ñ–¥–Ω–∏–∫
- `SERVER-SETUP-EXAMPLES.md` - –ø—Ä–∏–∫–ª–∞–¥–∏ –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö —Å–µ—Ä–≤–µ—Ä—ñ–≤
- `PRODUCTION-SETUP.md` - –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è production —Å–µ—Ä–≤–µ—Ä–∞
- `CHEATSHEET.md` - —à–≤–∏–¥–∫–∞ —à–ø–∞—Ä–≥–∞–ª–∫–∞
- `API-OPTIMIZATION.md` - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó
- `HTTP-HEADERS.md` - –æ–ø–∏—Å HTTP –∑–∞–≥–æ–ª–æ–≤–∫—ñ–≤

**–°—Ç–≤–æ—Ä–µ–Ω–æ —Å–∫—Ä–∏–ø—Ç:**
- `scripts/check-power-schedule.sh` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

**–û–Ω–æ–≤–ª–µ–Ω–æ:**
- `docs/power-outage/INDEX.md` - —ñ–Ω–¥–µ–∫—Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó
- `docs/power-outage/README.md` - —à–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç
- `docs/power-outage/QUICKSTART.md` - –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –Ω–æ–≤—É –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é
- `scripts/README.md` - –æ–ø–∏—Å –Ω–æ–≤–æ–≥–æ —Å–∫—Ä–∏–ø—Ç—É

---

## [1.1.0] - 2025-11-09

### –£–ª—É—á—à–µ–Ω–∏—è

- **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è hash:** Hash —Ç–µ–ø–µ—Ä—å –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∏–∑ `schedule_data`, –∞ –Ω–µ –∏–∑ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ç–æ—á–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –≥—Ä–∞—Ñ–∏–∫–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–π, –∏–≥–Ω–æ—Ä–∏—Ä—É—è –Ω–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –æ–ø–∏—Å–∞–Ω–∏–∏ –∏–ª–∏ –≤—Ä–µ–º–µ–Ω–∏ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.

- **–£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:**
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø—É—Å—Ç–æ–π HTML –æ—Ç–≤–µ—Ç
  - –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ª—É—á–∞–µ–≤, –∫–æ–≥–¥–∞ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–∞—Ç—ã –µ—â–µ –Ω–µ –¥–æ—Å—Ç—É–ø–Ω—ã

- **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã:**
  - –¢–µ—Å—Ç –Ω–∞ –ø—É—Å—Ç–æ–π HTML
  - –¢–µ—Å—Ç –Ω–∞ HTML —Ç–æ–ª—å–∫–æ —Å –ø—Ä–æ–±–µ–ª–∞–º–∏
  - –¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—É—Å—Ç–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞
  - –í—Å–µ–≥–æ 10 —Ç–µ—Å—Ç–æ–≤ (–≤—Å–µ –ø—Ä–æ—Ö–æ–¥—è—Ç)

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ `ValueError: DOMDocument::loadHTML(): Argument #1 ($source) must not be empty`
- –¢–µ–ø–µ—Ä—å –∫–æ–º–∞–Ω–¥–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–ª—É—á–∞–∏, –∫–æ–≥–¥–∞ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –±—É–¥—É—â–∏—Ö –¥–∞—Ç –µ—â–µ –Ω–µ –¥–æ—Å—Ç—É–ø–Ω—ã

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

**–î–æ:**
```php
$hash = $parser->generateHash($parsedData);
```

**–ü–æ—Å–ª–µ:**
```php
$hash = $parser->generateHash($parsedData['schedule_data']);
```

–≠—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ:
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Ä–µ–∞–ª—å–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –≤ –≥—Ä–∞—Ñ–∏–∫–µ
- –ù–µ —Å–æ–∑–¥–∞—é—Ç—Å—è –¥—É–±–ª–∏–∫–∞—Ç—ã –∑–∞–ø–∏—Å–µ–π –ø—Ä–∏ –Ω–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –æ–ø–∏—Å–∞–Ω–∏—è
- –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–æ–ª–µ–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ –∏ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ

## [1.0.0] - 2025-11-09

### –ü–µ—Ä–≤—ã–π —Ä–µ–ª–∏–∑

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∫–∞–∂–¥—ã–µ 10 –º–∏–Ω—É—Ç
- –ü–∞—Ä—Å–∏–Ω–≥ HTML –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram
- –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- –¢–µ—Å—Ç–æ–≤–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ

