# ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏—Ö —Å–ø–æ–≤—ñ—â–µ–Ω—å

## üìã –ë–∞–∑–æ–≤–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

- [ ] **1. –¢–æ–∫–µ–Ω–∏ —É .env**
  ```bash
  TELEGRAM_BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω
  TELEGRAM_CHAT_ID=–≤–∞—à_chat_id
  AIR_ALERT_API_TOKEN=8a0343dfa946b66b0b4c7b6e6c1f867076ea1a74ab2203
  ```

- [ ] **2. –ó–∞–ø—É—Å–∫ –º—ñ–≥—Ä–∞—Ü—ñ–π**
  ```bash
  php artisan migrate
  ```

- [ ] **3. –¢–µ—Å—Ç Telegram**
  ```bash
  php artisan tinker
  $telegram = new \App\Services\TelegramService();
  $telegram->sendMessage('üß™ –¢–µ—Å—Ç');
  exit
  ```

## üöÄ –ó–∞–ø—É—Å–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É

–û–±–µ—Ä—ñ—Ç—å –û–î–ò–ù –∑ –≤–∞—Ä—ñ–∞–Ω—Ç—ñ–≤:

### ‚úÖ –í–∞—Ä—ñ–∞–Ω—Ç 1: Crontab (–†–ï–ö–û–ú–ï–ù–î–û–í–ê–ù–û)

- [ ] **–î–æ–¥–∞—Ç–∏ –¥–æ crontab:**
  ```bash
  crontab -e
  ```
  
  –í—Å—Ç–∞–≤–∏—Ç–∏:
  ```cron
  * * * * * cd /home/igor/developer/task.famhub.local && php artisan schedule:run >> /dev/null 2>&1
  ```

- [ ] **–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏:**
  ```bash
  crontab -l
  ```

### ‚ö° –í–∞—Ä—ñ–∞–Ω—Ç 2: –®–≤–∏–¥–∫–∏–π –∑–∞–ø—É—Å–∫

- [ ] **–ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–∫—Ä–∏–ø—Ç:**
  ```bash
  ./scripts/start-air-alert-monitoring.sh
  ```

### üîÑ –í–∞—Ä—ñ–∞–Ω—Ç 3: –§–æ–Ω–æ–≤–∏–π —Ä–µ–∂–∏–º

- [ ] **–ó–∞–ø—É—Å—Ç–∏—Ç–∏ schedule:work:**
  ```bash
  nohup php artisan schedule:work > /dev/null 2>&1 &
  ```

- [ ] **–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø—Ä–æ—Ü–µ—Å:**
  ```bash
  ps aux | grep "schedule:work"
  ```

### üè¢ –í–∞—Ä—ñ–∞–Ω—Ç 4: Supervisor (–ü—Ä–æ–¥–∞–∫—à–Ω)

- [ ] **–°—Ç–≤–æ—Ä–∏—Ç–∏ –∫–æ–Ω—Ñ—ñ–≥:**
  ```bash
  sudo nano /etc/supervisor/conf.d/air-alert-scheduler.conf
  ```

- [ ] **–í–º—ñ—Å—Ç —Ñ–∞–π–ª—É:**
  ```ini
  [program:air-alert-scheduler]
  command=php /home/igor/developer/task.famhub.local/artisan schedule:work
  directory=/home/igor/developer/task.famhub.local
  user=www-data
  autostart=true
  autorestart=true
  ```

- [ ] **–ó–∞–ø—É—Å—Ç–∏—Ç–∏:**
  ```bash
  sudo supervisorctl reread
  sudo supervisorctl update
  sudo supervisorctl start air-alert-scheduler
  ```

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

- [ ] **–ó–∞–ø—É—Å—Ç–∏—Ç–∏ scheduler –≤—Ä—É—á–Ω—É:**
  ```bash
  php artisan schedule:run
  ```

- [ ] **–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å–ø–∏—Å–æ–∫ –∑–∞–≤–¥–∞–Ω—å:**
  ```bash
  php artisan schedule:list
  ```

- [ ] **–ó–∞–ø—É—Å—Ç–∏—Ç–∏ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –≤—Ä—É—á–Ω—É:**
  ```bash
  php artisan air-alert:monitor --region=19
  ```

- [ ] **–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ª–æ–≥–∏:**
  ```bash
  tail -f storage/logs/air-alert-monitor.log
  ```

## üìä –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–æ–±–æ—Ç–∏

- [ ] **–î–æ—á–µ–∫–∞—Ç–∏—Å—å –Ω–∞—Å—Ç—É–ø–Ω–æ—ó —Ö–≤–∏–ª–∏–Ω–∏** (scheduler –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è –∫–æ–∂–Ω—É —Ö–≤–∏–ª–∏–Ω—É)

- [ ] **–ü–æ–¥–∏–≤–∏—Ç–∏—Å—å —á–∏ –∑'—è–≤–∏–ª–∏—Å—å –∑–∞–ø–∏—Å–∏ –≤ –ª–æ–≥–∞—Ö:**
  ```bash
  ls -lh storage/logs/air-alert-monitor.log
  tail -20 storage/logs/air-alert-monitor.log
  ```

- [ ] **–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –±–∞–∑—É –¥–∞–Ω–∏—Ö:**
  ```bash
  php artisan tinker
  \App\Models\AirAlert::count()
  exit
  ```

- [ ] **–ß–µ–∫–∞—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤ Telegram** (—Ç—ñ–ª—å–∫–∏ –ø—Ä–∏ –∑–º—ñ–Ω—ñ —Å—Ç–∞—Ç—É—Å—É)

## üîç –©–æ –æ—á—ñ–∫—É–≤–∞—Ç–∏?

### ‚úÖ –ù–æ—Ä–º–∞–ª—å–Ω–∞ –ø–æ–≤–µ–¥—ñ–Ω–∫–∞:

- Scheduler –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è **–∫–æ–∂–Ω—É —Ö–≤–∏–ª–∏–Ω—É**
- –ö–æ–º–∞–Ω–¥–∏ `air-alert:monitor` –≤–∏–∫–æ–Ω—É—é—Ç—å—Å—è **–∫–æ–∂–Ω—ñ 30 —Å–µ–∫—É–Ω–¥** ‚ö°
- –ö–æ–º–∞–Ω–¥–∏ `air-alert:monitor-poltava` –≤–∏–∫–æ–Ω—É—é—Ç—å—Å—è **–∫–æ–∂–Ω—É —Ö–≤–∏–ª–∏–Ω—É**
- –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤ Telegram **–¢–Ü–õ–¨–ö–ò –ø—Ä–∏ –∑–º—ñ–Ω—ñ —Å—Ç–∞—Ç—É—Å—É**
- –Ø–∫—â–æ —Ç—Ä–∏–≤–æ–≥ –Ω–µ–º–∞—î - –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –Ω–µ –±—É–¥–µ (—Ü–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ!)

### üì± –ö–æ–ª–∏ –ø—Ä–∏–π–¥–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è:

1. **–ü—Ä–∏ –ø–æ—á–∞—Ç–∫—É —Ç—Ä–∏–≤–æ–≥–∏:**
   ```
   üö® –ü–û–í–Ü–¢–†–Ø–ù–ê –¢–†–ò–í–û–ì–ê!
   üìç –†–µ–≥—ñ–æ–Ω: –ü–æ–ª—Ç–∞–≤—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å
   ‚ö†Ô∏è –ü—Ä–æ–π–¥—ñ—Ç—å –¥–æ —É–∫—Ä–∏—Ç—Ç—è!
   ```

2. **–ü—Ä–∏ –≤—ñ–¥–±–æ—ó:**
   ```
   ‚úÖ –í—ñ–¥–±—ñ–π –ø–æ–≤—ñ—Ç—Ä—è–Ω–æ—ó —Ç—Ä–∏–≤–æ–≥–∏
   üìç –†–µ–≥—ñ–æ–Ω: –ü–æ–ª—Ç–∞–≤—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å
   ```

3. **–©–æ–¥–µ–Ω–Ω–∏–π –∑–≤—ñ—Ç –æ 20:00** (—è–∫—â–æ –±—É–ª–∏ —Ç—Ä–∏–≤–æ–≥–∏)

## üõ†Ô∏è –î–æ–¥–∞—Ç–∫–æ–≤—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

- [ ] **–ó–º—ñ–Ω–∏—Ç–∏ —á–∞—Å—Ç–æ—Ç—É –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É** (—É `routes/console.php`)
  - `->everyThirtySeconds()` - –∫–æ–∂–Ω—ñ 30 —Å–µ–∫—É–Ω–¥ (–ø–æ—Ç–æ—á–Ω–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è) ‚ö°
  - `->everyMinute()` - –∫–æ–∂–Ω—É —Ö–≤–∏–ª–∏–Ω—É
  - `->everyTwoMinutes()` - –∫–æ–∂–Ω—ñ 2 —Ö–≤–∏–ª–∏–Ω–∏
  - `->everyFiveMinutes()` - –∫–æ–∂–Ω—ñ 5 —Ö–≤–∏–ª–∏–Ω

- [ ] **–î–æ–¥–∞—Ç–∏ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —ñ–Ω—à–∏—Ö –æ–±–ª–∞—Å—Ç–µ–π:**
  ```php
  Schedule::command('air-alert:monitor --region=31') // –ö–∏—ó–≤
      ->everyTwoMinutes()
      ->runInBackground();
  ```

- [ ] **–ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ —Ä–æ—Ç–∞—Ü—ñ—é –ª–æ–≥—ñ–≤** (—É `config/logging.php`)

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

- [ ] **–ü—Ä–æ—á–∏—Ç–∞—Ç–∏:** `QUICKSTART-NOTIFICATIONS.md` - –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç
- [ ] **–ü—Ä–æ—á–∏—Ç–∞—Ç–∏:** `AIR-ALERT-NOTIFICATIONS-SETUP.md` - –î–µ—Ç–∞–ª—å–Ω–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è
- [ ] **–ü—Ä–æ—á–∏—Ç–∞—Ç–∏:** `FINAL-AIR-ALERT-SUMMARY.md` - –ó–∞–≥–∞–ª—å–Ω–∏–π –æ–≥–ª—è–¥

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

–Ø–∫—â–æ –≤—Å—ñ –ø—É–Ω–∫—Ç–∏ –≤–∏–∫–æ–Ω–∞–Ω–æ - **—Å–∏—Å—Ç–µ–º–∞ –ø—Ä–∞—Ü—é—î –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ 24/7**! üöÄ

### –®–≤–∏–¥–∫–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å—É:

```bash
# –ß–∏ –ø—Ä–∞—Ü—é—î cron?
crontab -l

# –ß–∏ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è scheduler?
ps aux | grep "schedule:work"

# –ß–∏ —î –ª–æ–≥–∏?
ls -lh storage/logs/air-alert-*.log

# –û—Å—Ç–∞–Ω–Ω—è –∞–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å
tail -5 storage/logs/air-alert-monitor.log
```

---

**–°–ª–∞–≤–∞ –£–∫—Ä–∞—ó–Ω—ñ! üá∫üá¶**

