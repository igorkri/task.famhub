# üìã –ö–∞—Å—Ç–æ–º–Ω—ñ –ø–æ–ª—è Asana –¥–ª—è —Ç–∞—Å–∫—ñ–≤

## –û–ø–∏—Å

–†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –ø–æ–≤–Ω—É –ø—ñ–¥—Ç—Ä–∏–º–∫—É –∫–∞—Å—Ç–æ–º–Ω–∏—Ö –ø–æ–ª—ñ–≤ (custom fields) –∑ Asana –¥–ª—è —Ç–∞—Å–∫—ñ–≤ –∑ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—é –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–æ—é:

- **–ö–∞—Å—Ç–æ–º–Ω—ñ –ø–æ–ª—è –≤–∏–∑–Ω–∞—á–∞—é—Ç—å—Å—è –Ω–∞ —Ä—ñ–≤–Ω—ñ –ø—Ä–æ—î–∫—Ç—É** (`ProjectCustomField`) - —Ü–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø–æ–ª—ñ–≤ (–Ω–∞–∑–≤–∞, —Ç–∏–ø, –º–æ–∂–ª–∏–≤—ñ –≤–∞—Ä—ñ–∞–Ω—Ç–∏ –¥–ª—è enum)
- **–ó–Ω–∞—á–µ–Ω–Ω—è –ø–æ–ª—ñ–≤ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –Ω–∞ —Ä—ñ–≤–Ω—ñ —Ç–∞—Å–∫—É** (`TaskCustomField`) - —Ü–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —Ç–∞—Å–∫—É

–¢–∞–∫–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î —Å—Ç—Ä—É–∫—Ç—É—Ä—ñ Asana API, –¥–µ custom fields –Ω–∞–ª–µ–∂–∞—Ç—å –ø—Ä–æ—î–∫—Ç—É, –∞ —Ç–∞—Å–∫–∏ –º–∞—é—Ç—å –ª–∏—à–µ –∑–Ω–∞—á–µ–Ω–Ω—è —Ü–∏—Ö –ø–æ–ª—ñ–≤.

---

## üèóÔ∏è –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞

### –î–≤—ñ —Ç–∞–±–ª–∏—Ü—ñ:

1. **`project_custom_fields`** - –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∫–∞—Å—Ç–æ–º–Ω–∏—Ö –ø–æ–ª—ñ–≤ –ø—Ä–æ—î–∫—Ç—É
   - –ó–±–µ—Ä—ñ–≥–∞—î –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –ø–æ–ª—ñ–≤ (–Ω–∞–∑–≤–∞, —Ç–∏–ø, –º–æ–∂–ª–∏–≤—ñ –≤–∞—Ä—ñ–∞–Ω—Ç–∏)
   - –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É—î—Ç—å—Å—è –∑ `custom_field_settings` –ø—Ä–æ—î–∫—Ç—É –≤ Asana
   
2. **`task_custom_fields`** - –ó–Ω–∞—á–µ–Ω–Ω—è –∫–∞—Å—Ç–æ–º–Ω–∏—Ö –ø–æ–ª—ñ–≤ –¥–ª—è —Ç–∞—Å–∫—ñ–≤
   - –ó–±–µ—Ä—ñ–≥–∞—î –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è –ø–æ–ª—ñ–≤ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —Ç–∞—Å–∫—É
   - –ú–∞—î –∑–≤'—è–∑–æ–∫ –∑ `project_custom_fields` —á–µ—Ä–µ–∑ `project_custom_field_id`

### –°—Ö–µ–º–∞ –∑–≤'—è–∑–∫—ñ–≤:

```
Project (–ø—Ä–æ—î–∫—Ç)
  ‚îî‚îÄ ProjectCustomField (–Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø–æ–ª—ñ–≤)
       ‚îî‚îÄ TaskCustomField (–∑–Ω–∞—á–µ–Ω–Ω—è –ø–æ–ª—ñ–≤)
            ‚îî‚îÄ Task (—Ç–∞—Å–∫)
```

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö

### –¢–∞–±–ª–∏—Ü—è `project_custom_fields`

```sql
CREATE TABLE project_custom_fields (
    id BIGINT PRIMARY KEY,
    project_id BIGINT FOREIGN KEY REFERENCES projects(id) ON DELETE CASCADE,
    asana_gid VARCHAR(255) -- Asana custom field GID
    name VARCHAR(255) -- –ù–∞–∑–≤–∞ –ø–æ–ª—è
    type VARCHAR(255) -- –¢–∏–ø: text, number, enum, date, multi_enum, people
    description TEXT NULL -- –û–ø–∏—Å –ø–æ–ª—è
    enum_options JSON NULL -- –ú–æ–∂–ª–∏–≤—ñ –≤–∞—Ä—ñ–∞–Ω—Ç–∏ –¥–ª—è enum: [{"gid":"...", "name":"..."}]
    is_required BOOLEAN DEFAULT FALSE -- –û–±–æ–≤'—è–∑–∫–æ–≤–µ –ø–æ–ª–µ
    precision INT NULL -- –¢–æ—á–Ω—ñ—Å—Ç—å –¥–ª—è number –ø–æ–ª—ñ–≤
    created_at TIMESTAMP,
    updated_at TIMESTAMP,
    
    UNIQUE KEY project_custom_field_unique (project_id, asana_gid)
);
```

### –¢–∞–±–ª–∏—Ü—è `task_custom_fields`

```sql
CREATE TABLE task_custom_fields (
    id BIGINT PRIMARY KEY,
    task_id BIGINT FOREIGN KEY REFERENCES tasks(id) ON DELETE CASCADE,
    project_custom_field_id BIGINT NULL FOREIGN KEY REFERENCES project_custom_fields(id) ON DELETE CASCADE,
    asana_gid VARCHAR(255) -- Asana custom field GID
    name VARCHAR(255) -- –ù–∞–∑–≤–∞ –ø–æ–ª—è (–∫–µ—à–æ–≤–∞–Ω–∞)
    type VARCHAR(255) -- –¢–∏–ø –ø–æ–ª—è
    
    -- –ó–Ω–∞—á–µ–Ω–Ω—è
    text_value TEXT NULL,
    number_value DECIMAL(15,2) NULL,
    date_value DATE NULL,
    enum_value_gid VARCHAR(255) NULL,
    enum_value_name VARCHAR(255) NULL,
    multi_enum_values JSON NULL,
    
    created_at TIMESTAMP,
    updated_at TIMESTAMP,
    
    UNIQUE KEY task_custom_field_unique (task_id, asana_gid)
);
```

---

## –ú—ñ–≥—Ä–∞—Ü—ñ—è

–î–ª—è –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è –∑–º—ñ–Ω –¥–æ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö:

```bash
php artisan migrate
```

–¶–µ —Å—Ç–≤–æ—Ä–∏—Ç—å –æ–±–∏–¥–≤—ñ —Ç–∞–±–ª–∏—Ü—ñ: `project_custom_fields` —Ç–∞ `task_custom_fields`.

---

## –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è

### –ö—Ä–æ–∫ 1: –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É–≤–∞—Ç–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø–æ–ª—ñ–≤ –ø—Ä–æ—î–∫—Ç—ñ–≤

**–°–ø–æ—á–∞—Ç–∫—É** –ø–æ—Ç—Ä—ñ–±–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É–≤–∞—Ç–∏ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –∫–∞—Å—Ç–æ–º–Ω–∏—Ö –ø–æ–ª—ñ–≤ –∑ –ø—Ä–æ—î–∫—Ç—ñ–≤ Asana:

```bash
# –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É–≤–∞—Ç–∏ –≤—Å—ñ –ø—Ä–æ—î–∫—Ç–∏
php artisan asana:sync-project-custom-fields

# –¢—ñ–ª—å–∫–∏ –æ–¥–∏–Ω –ø—Ä–æ—î–∫—Ç
php artisan asana:sync-project-custom-fields --project=5

# –ü–µ—Ä–µ–∑–∞–ø–∏—Å–∞—Ç–∏ —ñ—Å–Ω—É—é—á—ñ
php artisan asana:sync-project-custom-fields --force
```

**–ü—Ä–∏–∫–ª–∞–¥ –≤–∏–≤–æ–¥—É:**
```bash
$ php artisan asana:sync-project-custom-fields

–ó–Ω–∞–π–¥–µ–Ω–æ –ø—Ä–æ—î–∫—Ç—ñ–≤ –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó: 10

 10/10 [‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì] 100%

‚úì –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–æ–≤–∞–Ω–æ –ø—Ä–æ—î–∫—Ç—ñ–≤: 10
‚úì –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–æ–≤–∞–Ω–æ –ø–æ–ª—ñ–≤: 45

‚úì –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞!
–¢–µ–ø–µ—Ä –∑–∞–ø—É—Å—Ç—ñ—Ç—å: php artisan asana:sync-custom-fields
```

### –ö—Ä–æ–∫ 2: –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É–≤–∞—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è –ø–æ–ª—ñ–≤ —Ç–∞—Å–∫—ñ–≤

**–ü—ñ—Å–ª—è** —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó –ø–æ–ª—ñ–≤ –ø—Ä–æ—î–∫—Ç—ñ–≤, —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É–π—Ç–µ –∑–Ω–∞—á–µ–Ω–Ω—è –¥–ª—è —Ç–∞—Å–∫—ñ–≤:

```bash
# –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É–≤–∞—Ç–∏ –≤—Å—ñ —Ç–∞—Å–∫–∏
php artisan asana:sync-custom-fields

# –¢—ñ–ª—å–∫–∏ –æ–¥–∏–Ω —Ç–∞—Å–∫
php artisan asana:sync-custom-fields --task=123

# –¢—ñ–ª—å–∫–∏ —Ç–∞—Å–∫–∏ –∑ –ø—Ä–æ–µ–∫—Ç—É
php artisan asana:sync-custom-fields --project=5

# –ü–µ—Ä–µ–∑–∞–ø–∏—Å–∞—Ç–∏ —ñ—Å–Ω—É—é—á—ñ
php artisan asana:sync-custom-fields --force
```

### –ü–æ–≤–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è (–∑ –Ω—É–ª—è)

```bash
# 1. –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É–≤–∞—Ç–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø–æ–ª—ñ–≤ –ø—Ä–æ—î–∫—Ç—ñ–≤
php artisan asana:sync-project-custom-fields --force

# 2. –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É–≤–∞—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è –ø–æ–ª—ñ–≤ —Ç–∞—Å–∫—ñ–≤
php artisan asana:sync-custom-fields --force
```

---

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è —á–µ—Ä–µ–∑ Webhooks

–ö–∞—Å—Ç–æ–º–Ω—ñ –ø–æ–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É—é—Ç—å—Å—è –ø—Ä–∏:
- ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–Ω—ñ –Ω–æ–≤–æ–≥–æ —Ç–∞—Å–∫—É —á–µ—Ä–µ–∑ Asana webhook
- ‚úÖ –û–Ω–æ–≤–ª–µ–Ω–Ω—ñ —Ç–∞—Å–∫—É —á–µ—Ä–µ–∑ Asana webhook
- ‚úÖ –ó–º—ñ–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ –ø–æ–ª—è –≤ Asana

**–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è:**
```bash
php artisan asana:webhooks:create-all --force
```

---

## –ü—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω—ñ —Ç–∏–ø–∏ –ø–æ–ª—ñ–≤

| –¢–∏–ø | –û–ø–∏—Å | –ü—Ä–∏–∫–ª–∞–¥ –∑–Ω–∞—á–µ–Ω–Ω—è |
|-----|------|------------------|
| `text` | –¢–µ–∫—Å—Ç–æ–≤–µ –ø–æ–ª–µ | "–ö–ª—ñ—î–Ω—Ç: –¢–û–í –ö–æ–º–ø–∞–Ω—ñ—è" |
| `number` | –ß–∏—Å–ª–æ–≤–µ –ø–æ–ª–µ | 1500.00 |
| `date` | –î–∞—Ç–∞ | 24.10.2025 |
| `enum` | –°–ø–∏—Å–æ–∫ (–æ–¥–∏–Ω –≤–∏–±—ñ—Ä) | "–í–∏—Å–æ–∫–∏–π" |
| `multi_enum` | –ú–Ω–æ–∂–∏–Ω–Ω–∏–π –≤–∏–±—ñ—Ä | ["Backend", "Frontend"] |
| `people` | –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ | (–Ω–µ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ) |

---

## –†–æ–±–æ—Ç–∞ –∑ –∫–∞—Å—Ç–æ–º–Ω–∏–º–∏ –ø–æ–ª—è–º–∏ –≤ –∫–æ–¥—ñ

### –û—Ç—Ä–∏–º–∞–Ω–Ω—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å –ø–æ–ª—ñ–≤ –ø—Ä–æ—î–∫—Ç—É

```php
$project = Project::with('customFields')->find(1);

// –í—Å—ñ –∫–∞—Å—Ç–æ–º–Ω—ñ –ø–æ–ª—è –ø—Ä–æ—î–∫—Ç—É
foreach ($project->customFields as $field) {
    echo "{$field->name} ({$field->type})\n";
    
    // –î–ª—è enum –ø–æ–ª—ñ–≤ - –æ—Ç—Ä–∏–º–∞—Ç–∏ –≤–∞—Ä—ñ–∞–Ω—Ç–∏
    if ($field->type === 'enum') {
        $options = $field->getEnumOptions();
        foreach ($options as $option) {
            echo "  - {$option['name']}\n";
        }
    }
}
```

### –û—Ç—Ä–∏–º–∞–Ω–Ω—è –∑–Ω–∞—á–µ–Ω—å –ø–æ–ª—ñ–≤ —Ç–∞—Å–∫—É

```php
$task = Task::with('customFields.projectCustomField')->find(1);

// –í—Å—ñ –∫–∞—Å—Ç–æ–º–Ω—ñ –ø–æ–ª—è —Ç–∞—Å–∫—É
foreach ($task->customFields as $fieldValue) {
    echo "{$fieldValue->name}: {$fieldValue->getValue()}\n";
    
    // –û—Ç—Ä–∏–º–∞—Ç–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø–æ–ª—è —á–µ—Ä–µ–∑ –∑–≤'—è–∑–æ–∫
    $fieldSettings = $fieldValue->projectCustomField;
    if ($fieldSettings) {
        echo "  –¢–∏–ø: {$fieldSettings->type}\n";
        echo "  –û–±–æ–≤'—è–∑–∫–æ–≤–µ: " . ($fieldSettings->is_required ? '–¢–∞–∫' : '–ù—ñ') . "\n";
    }
}
```

### –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è —Ç–∞—Å–∫—ñ–≤ –∑–∞ –∫–∞—Å—Ç–æ–º–Ω–∏–º –ø–æ–ª–µ–º

```php
// –ó–Ω–∞–π—Ç–∏ —Ç–∞—Å–∫–∏ –∑ –ø–µ–≤–Ω–∏–º –∑–Ω–∞—á–µ–Ω–Ω—è–º enum –ø–æ–ª—è
$tasks = Task::whereHas('customFields', function ($query) {
    $query->where('name', '–ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç')
          ->where('enum_value_name', '–í–∏—Å–æ–∫–∏–π');
})->get();

// –ó–Ω–∞–π—Ç–∏ —Ç–∞—Å–∫–∏ –∑ —á–∏—Å–ª–æ–≤–∏–º –ø–æ–ª–µ–º –±—ñ–ª—å—à–µ 1000
$tasks = Task::whereHas('customFields', function ($query) {
    $query->where('name', '–ë—é–¥–∂–µ—Ç')
          ->where('number_value', '>', 1000);
})->get();
```

---

## –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –≤ Filament

### –¢–∞–± "–ö–∞—Å—Ç–æ–º–Ω—ñ –ø–æ–ª—è"

–í —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ñ —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è —Ç–∞—Å–∫—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑'—è–≤–ª—è—î—Ç—å—Å—è –Ω–æ–≤–∏–π —Ç–∞–± **"–ö–∞—Å—Ç–æ–º–Ω—ñ –ø–æ–ª—è"**, —è–∫—â–æ –¥–ª—è —Ç–∞—Å–∫—É —î –∫–∞—Å—Ç–æ–º–Ω—ñ –ø–æ–ª—è –∑ Asana.

**–û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ:**
- üîí **–¢—ñ–ª—å–∫–∏ –¥–ª—è –ø–µ—Ä–µ–≥–ª—è–¥—É** - –ø–æ–ª—è –Ω–µ–º–æ–∂–ª–∏–≤–æ —Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏ –≤ Filament
- üî¢ **Badge –∑ –∫—ñ–ª—å–∫—ñ—Å—Ç—é** - –Ω–∞ —Ç–∞–±—ñ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∫–∞—Å—Ç–æ–º–Ω–∏—Ö –ø–æ–ª—ñ–≤
- üìä **–§–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è** - –∑–Ω–∞—á–µ–Ω–Ω—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Ñ–æ—Ä–º–∞—Ç—É—é—Ç—å—Å—è –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —Ç–∏–ø—É
- üîó **–ó–≤'—è–∑–æ–∫ –∑ ProjectCustomField** - –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑ –ø—Ä–æ—î–∫—Ç—É

---

## –ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### 1. –û—Ç—Ä–∏–º–∞—Ç–∏ –≤—Å—ñ –º–æ–∂–ª–∏–≤—ñ –≤–∞—Ä—ñ–∞–Ω—Ç–∏ enum –ø–æ–ª—è

```php
$project = Project::find(1);
$statusField = $project->customFields()
    ->where('name', '–°—Ç–∞—Ç—É—Å')
    ->where('type', 'enum')
    ->first();

if ($statusField) {
    $options = $statusField->getEnumOptions();
    // [
    //   ['gid' => '123', 'name' => '–ù–æ–≤–∏–π', 'color' => 'green'],
    //   ['gid' => '456', 'name' => '–í –ø—Ä–æ—Ü–µ—Å—ñ', 'color' => 'yellow'],
    // ]
}
```

### 2. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ enum –ø–æ–ª—é

```php
$project = Project::find(1);

// –ü—ñ–¥—Ä–∞—Ö—É–≤–∞—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ç–∞—Å–∫—ñ–≤ –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º
$stats = TaskCustomField::where('name', '–°—Ç–∞—Ç—É—Å')
    ->whereHas('task', function($q) use ($project) {
        $q->where('project_id', $project->id);
    })
    ->groupBy('enum_value_name')
    ->selectRaw('enum_value_name, count(*) as count')
    ->get();

foreach ($stats as $stat) {
    echo "{$stat->enum_value_name}: {$stat->count} —Ç–∞—Å–∫—ñ–≤\n";
}
```

### 3. –í–∞–ª—ñ–¥–∞—Ü—ñ—è –∑–Ω–∞—á–µ–Ω—å enum

```php
$task = Task::find(1);
$projectCustomField = ProjectCustomField::where('project_id', $task->project_id)
    ->where('name', '–ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç')
    ->first();

$valueGid = '1234567890';
$option = $projectCustomField->findEnumOption($valueGid);

if ($option) {
    echo "–í–∏–±—Ä–∞–Ω–æ: {$option['name']}\n";
} else {
    echo "–ù–µ–≤—ñ—Ä–Ω–∏–π –≤–∞—Ä—ñ–∞–Ω—Ç!\n";
}
```

---

## –¢–∏–ø–æ–≤—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó

### –ü–æ—á–∞—Ç–∫–æ–≤–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –ø—ñ—Å–ª—è —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è

```bash
# 1. –ó–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏ –º—ñ–≥—Ä–∞—Ü—ñ—ó
php artisan migrate

# 2. –°—Ç–≤–æ—Ä–∏—Ç–∏ webhooks –¥–ª—è –≤—Å—ñ—Ö –ø—Ä–æ–µ–∫—Ç—ñ–≤
php artisan asana:webhooks:create-all --force

# 3. –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É–≤–∞—Ç–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø–æ–ª—ñ–≤ –ø—Ä–æ—î–∫—Ç—ñ–≤
php artisan asana:sync-project-custom-fields --force

# 4. –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É–≤–∞—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è –ø–æ–ª—ñ–≤ —Ç–∞—Å–∫—ñ–≤
php artisan asana:sync-custom-fields --force
```

### –î–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –ø—Ä–æ—î–∫—Ç—É

```bash
# 1. –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É–≤–∞—Ç–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø–æ–ª—ñ–≤ –¥–ª—è –Ω–æ–≤–æ–≥–æ –ø—Ä–æ—î–∫—Ç—É
php artisan asana:sync-project-custom-fields --project=NEW_PROJECT_ID

# 2. –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É–≤–∞—Ç–∏ —Ç–∞—Å–∫–∏ —Ü—å–æ–≥–æ –ø—Ä–æ—î–∫—Ç—É
php artisan asana:sync-custom-fields --project=NEW_PROJECT_ID
```

---

## Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: TaskCustomField –Ω–µ –º–∞—î –∑–≤'—è–∑–∫—É –∑ ProjectCustomField

**–ü—Ä–∏—á–∏–Ω–∞:** –ü–æ–ª—è –ø—Ä–æ—î–∫—Ç—É –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–æ–≤–∞–Ω—ñ

**–†—ñ—à–µ–Ω–Ω—è:**
```bash
php artisan asana:sync-project-custom-fields --force
php artisan asana:sync-custom-fields --force
```

### –ü—Ä–æ–±–ª–µ–º–∞: –í—ñ–¥—Å—É—Ç–Ω—ñ –≤–∞—Ä—ñ–∞–Ω—Ç–∏ –¥–ª—è enum –ø–æ–ª—ñ–≤

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø–æ–ª—è –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–æ–≤–∞–Ω–æ

**–†—ñ—à–µ–Ω–Ω—è:**
```bash
php artisan asana:sync-project-custom-fields --project=PROJECT_ID
```

---

## Changelog

### v2.0.0 (24.10.2025) - BREAKING CHANGES
- ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞:** –†–æ–∑–¥—ñ–ª–µ–Ω–æ –Ω–∞ `project_custom_fields` —Ç–∞ `task_custom_fields`
- ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–æ —Ç–∞–±–ª–∏—Ü—é `project_custom_fields` –¥–ª—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å –ø–æ–ª—ñ–≤
- ‚úÖ –î–æ–¥–∞–Ω–æ `project_custom_field_id` –¥–æ `task_custom_fields`
- ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–æ –º–æ–¥–µ–ª—å `ProjectCustomField`
- ‚úÖ –î–æ–¥–∞–Ω–æ –∫–æ–º–∞–Ω–¥—É `asana:sync-project-custom-fields`
- ‚úÖ –û–Ω–æ–≤–ª–µ–Ω–æ –∫–æ–º–∞–Ω–¥—É `asana:sync-custom-fields` –¥–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∑–≤'—è–∑–∫—ñ–≤
- ‚úÖ –û–Ω–æ–≤–ª–µ–Ω–æ webhook —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—é
- ‚úÖ –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ `enum_options` –∑ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—é –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó

### v1.0.0 (24.10.2025)
- ‚úÖ –ü–æ—á–∞—Ç–∫–æ–≤–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è (–∑–∞—Å—Ç–∞—Ä—ñ–ª–∞)

---

## –î–æ–¥–∞—Ç–∫–æ–≤—ñ —Ä–µ—Å—É—Ä—Å–∏

- **Asana API - Custom Fields:** https://developers.asana.com/docs/custom-fields
- **Asana API - Custom Field Settings:** https://developers.asana.com/docs/custom-field-settings

| –¢–∏–ø | –û–ø–∏—Å | –ü—Ä–∏–∫–ª–∞–¥ |
|-----|------|---------|
| `text` | –¢–µ–∫—Å—Ç–æ–≤–µ –ø–æ–ª–µ | "–ö–ª—ñ—î–Ω—Ç: –¢–û–í –ö–æ–º–ø–∞–Ω—ñ—è" |
| `number` | –ß–∏—Å–ª–æ–≤–µ –ø–æ–ª–µ | 1500.00 |
| `date` | –î–∞—Ç–∞ | 24.10.2025 |
| `enum` | –°–ø–∏—Å–æ–∫ (–æ–¥–∏–Ω –≤–∏–±—ñ—Ä) | "–ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç: –í–∏—Å–æ–∫–∏–π" |
| `multi_enum` | –ú–Ω–æ–∂–∏–Ω–Ω–∏–π –≤–∏–±—ñ—Ä | ["Backend", "Frontend", "Testing"] |

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö

### –¢–∞–±–ª–∏—Ü—è `task_custom_fields`

```sql
CREATE TABLE task_custom_fields (
    id BIGINT PRIMARY KEY,
    task_id BIGINT FOREIGN KEY REFERENCES tasks(id) ON DELETE CASCADE,
    asana_gid VARCHAR(255) -- Asana custom field GID
    name VARCHAR(255) -- –ù–∞–∑–≤–∞ –ø–æ–ª—è
    type VARCHAR(255) -- –¢–∏–ø: text, number, enum, date, multi_enum
    
    -- –ó–Ω–∞—á–µ–Ω–Ω—è
    text_value TEXT NULL,
    number_value DECIMAL(15,2) NULL,
    date_value DATE NULL,
    enum_value_gid VARCHAR(255) NULL,
    enum_value_name VARCHAR(255) NULL,
    multi_enum_values JSON NULL,
    
    created_at TIMESTAMP,
    updated_at TIMESTAMP,
    
    UNIQUE KEY task_custom_field_unique (task_id, asana_gid)
);
```

---

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è —á–µ—Ä–µ–∑ Webhooks

–ö–∞—Å—Ç–æ–º–Ω—ñ –ø–æ–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É—é—Ç—å—Å—è –ø—Ä–∏:
- ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–Ω—ñ –Ω–æ–≤–æ–≥–æ —Ç–∞—Å–∫—É —á–µ—Ä–µ–∑ Asana webhook
- ‚úÖ –û–Ω–æ–≤–ª–µ–Ω–Ω—ñ —Ç–∞—Å–∫—É —á–µ—Ä–µ–∑ Asana webhook
- ‚úÖ –ó–º—ñ–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ –ø–æ–ª—è –≤ Asana

**–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è:**
–ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ webhooks —Å—Ç–≤–æ—Ä–µ–Ω—ñ –¥–ª—è –≤–∞—à–∏—Ö –ø—Ä–æ–µ–∫—Ç—ñ–≤:
```bash
php artisan asana:webhooks:create-all --force
```

---

## –†—É—á–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è

### –ö–æ–º–∞–Ω–¥–∞ `asana:sync-custom-fields`

–°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É—î –∫–∞—Å—Ç–æ–º–Ω—ñ –ø–æ–ª—è –∑ Asana –¥–ª—è —Ç–∞—Å–∫—ñ–≤.

#### –ë–∞–∑–æ–≤–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

```bash
# –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É–≤–∞—Ç–∏ –≤—Å—ñ —Ç–∞—Å–∫–∏
php artisan asana:sync-custom-fields
```

#### –û–ø—Ü—ñ—ó

**`--task=ID`** - –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É–≤–∞—Ç–∏ —Ç—ñ–ª—å–∫–∏ –æ–¥–∏–Ω —Ç–∞—Å–∫
```bash
php artisan asana:sync-custom-fields --task=123
```

**`--project=ID`** - –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É–≤–∞—Ç–∏ —Ç—ñ–ª—å–∫–∏ —Ç–∞—Å–∫–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç—É
```bash
php artisan asana:sync-custom-fields --project=5
```

**`--force`** - –ü–µ—Ä–µ–∑–∞–ø–∏—Å–∞—Ç–∏ —ñ—Å–Ω—É—é—á—ñ –∫–∞—Å—Ç–æ–º–Ω—ñ –ø–æ–ª—è
```bash
php artisan asana:sync-custom-fields --force
```

#### –ü—Ä–∏–∫–ª–∞–¥ –≤–∏–≤–æ–¥—É

```bash
$ php artisan asana:sync-custom-fields

–ó–Ω–∞–π–¥–µ–Ω–æ —Ç–∞—Å–∫—ñ–≤ –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó: 150

 150/150 [‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì] 100%

‚úì –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–æ–≤–∞–Ω–æ: 120
‚óã –ü—Ä–æ–ø—É—â–µ–Ω–æ (–±–µ–∑ custom fields): 30

‚úì –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞!
```

---

## –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –≤ Filament

### –¢–∞–± "–ö–∞—Å—Ç–æ–º–Ω—ñ –ø–æ–ª—è"

–í —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ñ —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è —Ç–∞—Å–∫—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑'—è–≤–ª—è—î—Ç—å—Å—è –Ω–æ–≤–∏–π —Ç–∞–± **"–ö–∞—Å—Ç–æ–º–Ω—ñ –ø–æ–ª—è"**, —è–∫—â–æ –¥–ª—è —Ç–∞—Å–∫—É —î –∫–∞—Å—Ç–æ–º–Ω—ñ –ø–æ–ª—è –∑ Asana.

**–û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ:**
- üîí **–¢—ñ–ª—å–∫–∏ –¥–ª—è –ø–µ—Ä–µ–≥–ª—è–¥—É** - –ø–æ–ª—è –Ω–µ–º–æ–∂–ª–∏–≤–æ —Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏ –≤ Filament
- üî¢ **Badge –∑ –∫—ñ–ª—å–∫—ñ—Å—Ç—é** - –Ω–∞ —Ç–∞–±—ñ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∫–∞—Å—Ç–æ–º–Ω–∏—Ö –ø–æ–ª—ñ–≤
- üìä **–§–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è** - –∑–Ω–∞—á–µ–Ω–Ω—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Ñ–æ—Ä–º–∞—Ç—É—é—Ç—å—Å—è –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —Ç–∏–ø—É
- üîÑ **–û–Ω–æ–≤–ª–µ–Ω–Ω—è** - –ø—ñ–¥–∫–∞–∑–∫–∞ —è–∫ –æ–Ω–æ–≤–∏—Ç–∏ –¥–∞–Ω—ñ —á–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å–Ω—É –∫–æ–º–∞–Ω–¥—É

**–í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –ø–æ–ª—ñ–≤:**
- –ù–∞–∑–≤–∞ –ø–æ–ª—è (–∑ Asana)
- –¢–∏–ø –ø–æ–ª—è (–∑ —ñ–∫–æ–Ω–∫–æ—é: üìù –¢–µ–∫—Å—Ç, üî¢ –ß–∏—Å–ª–æ, üìÖ –î–∞—Ç–∞, üìã –°–ø–∏—Å–æ–∫)
- –ü–æ—Ç–æ—á–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è

---

## –†–æ–±–æ—Ç–∞ –∑ –∫–∞—Å—Ç–æ–º–Ω–∏–º–∏ –ø–æ–ª—è–º–∏ –≤ –∫–æ–¥—ñ

### –û—Ç—Ä–∏–º–∞–Ω–Ω—è –∫–∞—Å—Ç–æ–º–Ω–∏—Ö –ø–æ–ª—ñ–≤ —Ç–∞—Å–∫—É

```php
$task = Task::with('customFields')->find(1);

// –í—Å—ñ –∫–∞—Å—Ç–æ–º–Ω—ñ –ø–æ–ª—è
$customFields = $task->customFields;

// –ö–æ–Ω–∫—Ä–µ—Ç–Ω–µ –ø–æ–ª–µ –∑–∞ –Ω–∞–∑–≤–æ—é
$priorityField = $task->customFields()->where('name', '–ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç')->first();
if ($priorityField) {
    echo $priorityField->getValue(); // –ü–æ–≤–µ—Ä—Ç–∞—î —Ñ–æ—Ä–º–∞—Ç–æ–≤–∞–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è
}
```

### –û—Ç—Ä–∏–º–∞–Ω–Ω—è –∑–Ω–∞—á–µ–Ω–Ω—è –ø–æ–ª—è

```php
$field = TaskCustomField::find(1);

// –£–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∏–π –º–µ—Ç–æ–¥ - –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∑–Ω–∞—á–∞—î —Ç–∏–ø
$value = $field->getValue();

// –ê–±–æ –Ω–∞–ø—Ä—è–º—É –∑ –∞—Ç—Ä–∏–±—É—Ç—ñ–≤
match ($field->type) {
    'text' => $field->text_value,
    'number' => $field->number_value,
    'date' => $field->date_value->format('d.m.Y'),
    'enum' => $field->enum_value_name,
    'multi_enum' => $field->multi_enum_values,
};
```

### –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–Ω–∞—á–µ–Ω–Ω—è –∑ –¥–∞–Ω–∏—Ö Asana

```php
$field = new TaskCustomField([
    'task_id' => 1,
    'asana_gid' => '1234567890',
    'name' => '–ë—é–¥–∂–µ—Ç –ø—Ä–æ–µ–∫—Ç—É',
]);

$field->setValueFromAsana([
    'type' => 'number',
    'number_value' => 15000.50,
]);

$field->save();
```

---

## –ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### 1. –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è —Ç–∞—Å–∫—ñ–≤ –∑–∞ –∫–∞—Å—Ç–æ–º–Ω–∏–º –ø–æ–ª–µ–º

```php
// –ó–Ω–∞–π—Ç–∏ —Ç–∞—Å–∫–∏ –∑ –ø–µ–≤–Ω–∏–º –∑–Ω–∞—á–µ–Ω–Ω—è–º –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ –ø–æ–ª—è
$tasks = Task::whereHas('customFields', function ($query) {
    $query->where('name', '–ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç')
          ->where('enum_value_name', '–í–∏—Å–æ–∫–∏–π');
})->get();
```

### 2. –û—Ç—Ä–∏–º–∞–Ω–Ω—è –≤—Å—ñ—Ö –∫–∞—Å—Ç–æ–º–Ω–∏—Ö –ø–æ–ª—ñ–≤ —Ç–∏–ø—É "—á–∏—Å–ª–æ"

```php
$task = Task::find(1);
$numberFields = $task->customFields()
    ->where('type', 'number')
    ->get();

foreach ($numberFields as $field) {
    echo "{$field->name}: {$field->number_value}\n";
}
```

### 3. –í–∏–≤–µ–¥–µ–Ω–Ω—è –≤—Å—ñ—Ö –ø–æ–ª—ñ–≤ —É –≤–∏–≥–ª—è–¥—ñ —Å–ø–∏—Å–∫—É

```php
$task = Task::with('customFields')->find(1);

foreach ($task->customFields as $field) {
    echo "{$field->name}: {$field->getValue()}\n";
}
```

---

## –ú—ñ–≥—Ä–∞—Ü—ñ—è

–î–ª—è –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è –∑–º—ñ–Ω –¥–æ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö:

```bash
php artisan migrate
```

–ú—ñ–≥—Ä–∞—Ü—ñ—è —Å—Ç–≤–æ—Ä–∏—Ç—å —Ç–∞–±–ª–∏—Ü—é `task_custom_fields` –∑ —É—Å—ñ–º–∞ –Ω–µ–æ–±—Ö—ñ–¥–Ω–∏–º–∏ —ñ–Ω–¥–µ–∫—Å–∞–º–∏ —Ç–∞ –∑–≤'—è–∑–∫–∞–º–∏.

---

## –í—ñ–¥–∫–∞—Ç (Rollback)

–Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤—ñ–¥–∫–æ—Ç–∏—Ç–∏ –∑–º—ñ–Ω–∏:

```bash
# –í—ñ–¥–∫–æ—Ç–∏—Ç–∏ –æ—Å—Ç–∞–Ω–Ω—é –º—ñ–≥—Ä–∞—Ü—ñ—é
php artisan migrate:rollback

# –ê–±–æ –≤—Ä—É—á–Ω—É –≤–∏–¥–∞–ª–∏—Ç–∏ —Ç–∞–±–ª–∏—Ü—é
php artisan tinker
>>> Schema::dropIfExists('task_custom_fields');
```

---

## –¢–∏–ø–æ–≤—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó

### –ü–æ—á–∞—Ç–∫–æ–≤–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –ø—ñ—Å–ª—è —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è

```bash
# 1. –ó–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏ –º—ñ–≥—Ä–∞—Ü—ñ—ó
php artisan migrate

# 2. –°—Ç–≤–æ—Ä–∏—Ç–∏ webhooks –¥–ª—è –≤—Å—ñ—Ö –ø—Ä–æ–µ–∫—Ç—ñ–≤
php artisan asana:webhooks:create-all --force

# 3. –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É–≤–∞—Ç–∏ –∫–∞—Å—Ç–æ–º–Ω—ñ –ø–æ–ª—è –¥–ª—è —ñ—Å–Ω—É—é—á–∏—Ö —Ç–∞—Å–∫—ñ–≤
php artisan asana:sync-custom-fields --force
```

### –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–∞—Å—Ç–æ–º–Ω–∏—Ö –ø–æ–ª—ñ–≤ –ø—ñ—Å–ª—è –∑–º—ñ–Ω –≤ Asana

```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ–Ω–æ–≤–∏—Ç—å—Å—è —á–µ—Ä–µ–∑ webhook
# –ê–±–æ –≤—Ä—É—á–Ω—É:
php artisan asana:sync-custom-fields --force
```

### –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç—É

```bash
# 1. –ó–Ω–∞–π—Ç–∏ ID –ø—Ä–æ–µ–∫—Ç—É
php artisan tinker
>>> Project::select('id', 'name')->get();

# 2. –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É–≤–∞—Ç–∏
php artisan asana:sync-custom-fields --project=5
```

---

## –õ–æ–≥—É–≤–∞–Ω–Ω—è

–í—Å—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó –∑ –∫–∞—Å—Ç–æ–º–Ω–∏–º–∏ –ø–æ–ª—è–º–∏ –ª–æ–≥—É—é—Ç—å—Å—è:

```bash
# –ü–µ—Ä–µ–≥–ª—è–¥ –ª–æ–≥—ñ–≤
tail -f storage/logs/laravel.log | grep -i "custom field"
```

–ü—Ä–∏–∫–ª–∞–¥–∏ –ª–æ–≥—ñ–≤:

**–£—Å–ø—ñ—à–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è:**
```
[2025-10-24] local.INFO: Task updated from webhook {"custom_fields_count":3}
```

**–ü–æ–º–∏–ª–∫–∞:**
```
[2025-10-24] local.ERROR: Failed to sync custom fields for task {"task_id":123}
```

---

## Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: –ö–∞—Å—Ç–æ–º–Ω—ñ –ø–æ–ª—è –Ω–µ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è

**–ü—Ä–∏—á–∏–Ω–∞:** –¢–∞—Å–∫ —â–µ –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–æ–≤–∞–Ω–æ –∑ Asana

**–†—ñ—à–µ–Ω–Ω—è:**
```bash
php artisan asana:sync-custom-fields --task=123
```

### –ü—Ä–æ–±–ª–µ–º–∞: –°—Ç–∞—Ä—ñ –∑–Ω–∞—á–µ–Ω–Ω—è –∫–∞—Å—Ç–æ–º–Ω–∏—Ö –ø–æ–ª—ñ–≤

**–ü—Ä–∏—á–∏–Ω–∞:** Webhooks –Ω–µ –ø—Ä–∞—Ü—é—é—Ç—å –∞–±–æ –¥–∞–Ω—ñ –∑–∞—Å—Ç–∞—Ä—ñ–ª–∏

**–†—ñ—à–µ–Ω–Ω—è:**
```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ webhooks
php artisan asana:webhooks list

# –ü–µ—Ä–µ—Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É–≤–∞—Ç–∏ –∑ --force
php artisan asana:sync-custom-fields --force
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ü–æ–º–∏–ª–∫–∞ "column not found"

**–ü—Ä–∏—á–∏–Ω–∞:** –ú—ñ–≥—Ä–∞—Ü—ñ—è –Ω–µ –∑–∞—Å—Ç–æ—Å–æ–≤–∞–Ω–∞

**–†—ñ—à–µ–Ω–Ω—è:**
```bash
php artisan migrate
php artisan migrate:status
```

---

## –û–±–º–µ–∂–µ–Ω–Ω—è —Ç–∞ –æ—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ

1. **–¢—ñ–ª—å–∫–∏ —á–∏—Ç–∞–Ω–Ω—è –≤ Filament** - –∫–∞—Å—Ç–æ–º–Ω—ñ –ø–æ–ª—è –Ω–µ–º–æ–∂–ª–∏–≤–æ —Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏ —á–µ—Ä–µ–∑ Filament, —Ç—ñ–ª—å–∫–∏ –≤ Asana
2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è** - –≤–∏–º–∞–≥–∞—î –∞–∫—Ç–∏–≤–Ω–∏—Ö webhooks
3. **–¢–∏–ø–∏ –ø–æ–ª—ñ–≤** - –ø—ñ–¥—Ç—Ä–∏–º—É—é—Ç—å—Å—è –≤—Å—ñ –æ—Å–Ω–æ–≤–Ω—ñ —Ç–∏–ø–∏ Asana custom fields
4. **–£–Ω—ñ–∫–∞–ª—å–Ω—ñ—Å—Ç—å** - –æ–¥–Ω–µ –∫–∞—Å—Ç–æ–º–Ω–µ –ø–æ–ª–µ –º–æ–∂–µ –±—É—Ç–∏ –ª–∏—à–µ –æ–¥–∏–Ω —Ä–∞–∑ –¥–ª—è —Ç–∞—Å–∫—É (task_id + asana_gid)

---

## –î–æ–¥–∞—Ç–∫–æ–≤—ñ —Ä–µ—Å—É—Ä—Å–∏

- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è Asana API:** https://developers.asana.com/docs/custom-fields
- **–Ü–Ω—à—ñ –≥–∞–π–¥–∏:**
  - [asana-webhooks-production.md](./asana-webhooks-production.md)
  - [asana-integration-guide.md](./asana-integration-guide.md)
  - [asana-usage-examples.md](./asana-usage-examples.md)

---

## Changelog

### v1.0.0 (24.10.2025)
- ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–æ —Ç–∞–±–ª–∏—Ü—é `task_custom_fields`
- ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–æ –º–æ–¥–µ–ª—å `TaskCustomField`
- ‚úÖ –î–æ–¥–∞–Ω–æ –≤—ñ–¥–Ω–æ—à–µ–Ω–Ω—è `customFields()` –¥–æ –º–æ–¥–µ–ª—ñ `Task`
- ‚úÖ –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω—É —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—é —á–µ—Ä–µ–∑ webhooks
- ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–æ –∫–æ–º–∞–Ω–¥—É `asana:sync-custom-fields`
- ‚úÖ –î–æ–¥–∞–Ω–æ —Ç–∞–± "–ö–∞—Å—Ç–æ–º–Ω—ñ –ø–æ–ª—è" –≤ Filament
- ‚úÖ –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –≤—Å—ñ—Ö —Ç–∏–ø—ñ–≤ –ø–æ–ª—ñ–≤: text, number, date, enum, multi_enum

