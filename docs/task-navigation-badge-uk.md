# –°–ø–æ–≤—ñ—â–µ–Ω–Ω—è –ø—Ä–æ –∑–∞–¥–∞—á—ñ –≤ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—ó

## –©–æ –¥–æ–¥–∞–Ω–æ
–£ –±–æ–∫–æ–≤—ñ–π –Ω–∞–≤—ñ–≥–∞—Ü—ñ—ó Filament —Ç–µ–ø–µ—Ä –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω–∏—Ö –∑–∞–¥–∞—á (–∑—ñ —Å—Ç–∞—Ç—É—Å–∞–º–∏ "–ù–æ–≤–∏–π" —Ç–∞ "–í –ø—Ä–æ—Ü–µ—Å—ñ") —É –≤–∏–≥–ª—è–¥—ñ badge –ø–æ—Ä—É—á –∑ –ø—É–Ω–∫—Ç–æ–º –º–µ–Ω—é "–ó–∞–¥–∞—á—ñ".

## –Ø–∫ —Ü–µ –≤–∏–≥–ª—è–¥–∞—î

```
üìã –ó–∞–¥–∞—á—ñ [3]  <- –∑–µ–ª–µ–Ω–∏–π badge (1-4 –∑–∞–¥–∞—á—ñ)
üìã –ó–∞–¥–∞—á—ñ [7]  <- –∂–æ–≤—Ç–∏–π badge (5-9 –∑–∞–¥–∞—á)
üìã –ó–∞–¥–∞—á—ñ [15] <- —á–µ—Ä–≤–æ–Ω–∏–π badge (10+ –∑–∞–¥–∞—á)
```

## –ö–æ–ª—å–æ—Ä–æ–≤–∞ —ñ–Ω–¥–∏–∫–∞—Ü—ñ—è

- **–ó–µ–ª–µ–Ω–∏–π (success)**: 1-4 –∞–∫—Ç–∏–≤–Ω—ñ –∑–∞–¥–∞—á—ñ
- **–ñ–æ–≤—Ç–∏–π (warning)**: 5-9 –∞–∫—Ç–∏–≤–Ω–∏—Ö –∑–∞–¥–∞—á
- **–ß–µ—Ä–≤–æ–Ω–∏–π (danger)**: 10 —ñ –±—ñ–ª—å—à–µ –∞–∫—Ç–∏–≤–Ω–∏—Ö –∑–∞–¥–∞—á
- **–ù–µ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è**: –Ω–µ–º–∞—î –∞–∫—Ç–∏–≤–Ω–∏—Ö –∑–∞–¥–∞—á

## –Ø–∫—ñ –∑–∞–¥–∞—á—ñ –≤—Ä–∞—Ö–æ–≤—É—é—Ç—å—Å—è

Badge –ø–æ–∫–∞–∑—É—î —Ç—ñ–ª—å–∫–∏:
- –ó–∞–¥–∞—á—ñ –∑—ñ —Å—Ç–∞—Ç—É—Å–æ–º "–ù–æ–≤–∏–π" (`new`)
- –ó–∞–¥–∞—á—ñ –∑—ñ —Å—Ç–∞—Ç—É—Å–æ–º "–í –ø—Ä–æ—Ü–µ—Å—ñ" (`in_progress`)
- –¢—ñ–ª—å–∫–∏ –Ω–µ –∑–∞–≤–µ—Ä—à–µ–Ω—ñ –∑–∞–¥–∞—á—ñ (`is_completed = false`)

## –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ

### –ó–º—ñ–Ω–µ–Ω—ñ —Ñ–∞–π–ª–∏:
- `app/Filament/Resources/Tasks/TaskResource.php` - –¥–æ–¥–∞–Ω—ñ –º–µ—Ç–æ–¥–∏ `getNavigationBadge()` —Ç–∞ `getNavigationBadgeColor()`

### –î–æ–¥–∞–Ω—ñ —Ç–µ—Å—Ç–∏:
- `tests/Feature/TaskNavigationBadgeTest.php` - 6 —Ç–µ—Å—Ç—ñ–≤ –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è:
- `docs/task-navigation-badge.md` - –ø–æ–≤–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è (–∞–Ω–≥–ª—ñ–π—Å—å–∫–æ—é)

## –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç—ñ–≤

```bash
php artisan test --filter=TaskNavigationBadgeTest
```

## –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–æ–±–æ—Ç–∏

–ó–∞–ø—É—Å—Ç—ñ—Ç—å —Ç–µ—Å—Ç–æ–≤–∏–π —Å–∫—Ä–∏–ø—Ç:
```bash
php test-badge.php
```

–í—ñ–Ω –ø–æ–∫–∞–∂–µ:
- –ü–æ—Ç–æ—á–Ω—É –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω–∏—Ö –∑–∞–¥–∞—á
- –ó–Ω–∞—á–µ–Ω–Ω—è badge
- –ö–æ–ª—ñ—Ä badge

## –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

–Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–º—ñ–Ω–∏—Ç–∏:

### –°—Ç–∞—Ç—É—Å–∏ –∑–∞–¥–∞—á –¥–ª—è –ø—ñ–¥—Ä–∞—Ö—É–Ω–∫—É
–í—ñ–¥—Ä–µ–¥–∞–≥—É–π—Ç–µ `TaskResource::getNavigationBadge()`:
```php
Task::whereIn('status', [
    Task::STATUS_NEW, 
    Task::STATUS_IN_PROGRESS,
    Task::STATUS_NEEDS_CLARIFICATION, // –¥–æ–¥–∞—Ç–∏ —ñ–Ω—à—ñ —Å—Ç–∞—Ç—É—Å–∏
])
```

### –ü–æ—Ä–æ–≥–∏ –∫–æ–ª—å–æ—Ä–æ–≤–æ—ó —ñ–Ω–¥–∏–∫–∞—Ü—ñ—ó
–í—ñ–¥—Ä–µ–¥–∞–≥—É–π—Ç–µ `TaskResource::getNavigationBadgeColor()`:
```php
return match (true) {
    $count === 0 => null,
    $count < 3 => 'success',    // –∑–º—ñ–Ω–∏—Ç–∏ –ø–æ—Ä—ñ–≥
    $count < 7 => 'warning',    // –∑–º—ñ–Ω–∏—Ç–∏ –ø–æ—Ä—ñ–≥
    default => 'danger',
};
```

### –§—ñ–ª—å—Ç—Ä –ø–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É
–©–æ–± –ø–æ–∫–∞–∑—É–≤–∞—Ç–∏ —Ç—ñ–ª—å–∫–∏ –∑–∞–¥–∞—á—ñ –ø–æ—Ç–æ—á–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞, –¥–æ–¥–∞–π—Ç–µ:
```php
->where('user_id', auth()->id())
```

## –ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å

–ü—ñ–¥—Ä–∞—Ö—É–Ω–æ–∫ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –ø—Ä–∏ –∫–æ–∂–Ω–æ–º—É –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏. –î–ª—è –≤–µ–ª–∏–∫–æ—ó –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –∑–∞–¥–∞—á —Ä–µ–∫–æ–º–µ–Ω–¥—É—î—Ç—å—Å—è –¥–æ–¥–∞—Ç–∏ –∫–µ—à—É–≤–∞–Ω–Ω—è:

```php
use Illuminate\Support\Facades\Cache;

public static function getNavigationBadge(): ?string
{
    $count = Cache::remember('tasks.active.count', 60, function () {
        return Task::whereIn('status', [Task::STATUS_NEW, Task::STATUS_IN_PROGRESS])
            ->where('is_completed', false)
            ->count();
    });

    return $count > 0 ? (string) $count : null;
}
```

–ù–µ –∑–∞–±—É–¥—å—Ç–µ —Å–∫–∏–¥–∞—Ç–∏ –∫–µ—à –ø—Ä–∏ –∑–º—ñ–Ω—ñ –∑–∞–¥–∞—á (–≤ Observer).

