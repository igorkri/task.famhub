# ✅ НАЛАШТОВАНО: Сповіщення ТІЛЬКИ для Полтави

## 📅 Дата: 2025-11-11

## 🎯 Що змінено

### ✅ ТЕПЕР моніториться:
- **Тільки Полтавська область** (UID 19)
- **Тільки громади Полтавського району**

### ❌ НЕ моніториться:
- Київ, Харків, Львів та інші області
- Моніторинг тільки для Полтави!

## 📝 Зміни в коді

### routes/console.php

**Було (всі області):**
```php
Schedule::command('air-alert:monitor')
    ->everyThirtySeconds()
```

**Стало (тільки Полтава):**
```php
Schedule::command('air-alert:monitor --region=19')
    ->everyThirtySeconds()
```

## 📱 Повідомлення в Telegram

### ✅ БУДУТЬ приходити:

1. **При тривозі в Полтавській області:**
   ```
   🚨 ПОВІТРЯНА ТРИВОГА!
   📍 Регіон: Полтавська область
   ⚠️ Пройдіть до укриття!
   ```

2. **При відбої в Полтавській області:**
   ```
   ✅ Відбій повітряної тривоги
   📍 Регіон: Полтавська область
   ```

### ❌ НЕ БУДУТЬ приходити:

- Повідомлення про тривоги в Києві
- Повідомлення про тривоги в Харкові
- Повідомлення про тривоги в інших областях

**Моніторяться ТІЛЬКИ Полтава та район!**

## 🔄 Автоматична робота

### Що працює кожні 30 секунд:
```bash
php artisan air-alert:monitor --region=19
```

Перевіряє:
- Чи є тривога в Полтавській області?
- Чи змінився статус?
- Якщо так → відправляє в Telegram

### Що працює кожну хвилину:
```bash
php artisan air-alert:monitor-poltava --all
```

Показує детально:
- Які громади під тривогою
- Які громади без тривоги

## 🧪 Як протестувати

### Тест 1: Відправити тестове повідомлення

```bash
php artisan telegram:test-alert
```

Отримаєте в Telegram:
```
🧪 ТЕСТОВА ПОВІТРЯНА ТРИВОГА!
📍 Регіон: Полтавська область
⚠️ Це тест системи сповіщень
```

### Тест 2: Перевірити реальний статус

```bash
php artisan air-alert:monitor --region=19
```

Побачите:
- Якщо тривоги немає: `ℹ️ Статус не змінився (тривоги немає)`
- Якщо є тривога: `🚨 ТРИВОГА! Регіон: Полтавська область`

### Тест 3: Детальна інформація

```bash
php artisan air-alert:monitor-poltava --all
```

## 💡 Якщо потрібно додати інші області

Відкрийте `routes/console.php` та додайте:

```php
// Додати Київ
Schedule::command('air-alert:monitor --region=31')
    ->everyThirtySeconds()
    ->withoutOverlapping()
    ->runInBackground();

// Додати Харків
Schedule::command('air-alert:monitor --region=22')
    ->everyThirtySeconds()
    ->withoutOverlapping()
    ->runInBackground();

// Моніторити ВСЮ Україну
Schedule::command('air-alert:monitor')
    ->everyThirtySeconds()
    ->withoutOverlapping()
    ->runInBackground();
```

## 📊 Статистика

### Моніторинг:
- **Регіон:** Полтавська область (UID 19)
- **Частота перевірки:** Кожні 30 секунд
- **Громади:** 24 (детальний моніторинг кожну хвилину)
- **Повідомлень/день:** 2-10 (тільки при змінах!)

### API запити:
- **На хвилину:** 2 запити (Полтава × 2)
- **На годину:** 120 запитів
- **Ліміт API:** 8-10/хв - в межах норми ✅

## ✅ Переваги

✅ **Тільки важлива інформація** - сповіщення тільки про вашу область  
✅ **Швидко** - 30 секунд до сповіщення  
✅ **Детально** - можна бачити конкретні громади  
✅ **Не спамить** - тільки при зміні статусу  

## 📚 Документація

Оновлено:
- ✅ TELEGRAM-QUICK-ANSWER.md
- ✅ AIR-ALERT-NOTIFICATIONS-SETUP.md
- ✅ QUICKSTART-NOTIFICATIONS.md
- ✅ FINAL-AIR-ALERT-SUMMARY.md
- ✅ routes/console.php

## 🚀 Готово!

**Система налаштована для моніторингу ТІЛЬКИ Полтави!**

Щоб запустити:
```bash
# Якщо scheduler не запущено
crontab -e
# Додати:
* * * * * cd /home/igor/developer/task.famhub.local && php artisan schedule:run >> /dev/null 2>&1
```

---

**Слава Україні! 🇺🇦**

