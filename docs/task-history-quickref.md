# –®–≤–∏–¥–∫–∏–π –¥–æ–≤—ñ–¥–Ω–∏–∫: –Ü—Å—Ç–æ—Ä—ñ—è –∑–º—ñ–Ω —Ç–∞—Å–∫—ñ–≤

## üéØ –®–≤–∏–¥–∫–∏–π –¥–æ—Å—Ç—É–ø

### –í Filament UI
1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ –±—É–¥—å-—è–∫–∏–π —Ç–∞—Å–∫ –Ω–∞ —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è
2. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞ —Ç–∞–± **"–Ü—Å—Ç–æ—Ä—ñ—è –∑–º—ñ–Ω"**
3. –ü–µ—Ä–µ–≥–ª—è–¥–∞–π—Ç–µ –≤—Å—ñ –∑–º—ñ–Ω–∏ –∑ —Ñ—ñ–ª—å—Ç—Ä–∞–º–∏

### –í –∫–æ–¥—ñ
```php
// –û—Ç—Ä–∏–º–∞—Ç–∏ –≤—Å—é —ñ—Å—Ç–æ—Ä—ñ—é —Ç–∞—Å–∫–∞
$task->histories;

// –û—Å—Ç–∞–Ω–Ω—ñ 10 –∑–º—ñ–Ω
$task->histories()->latest('event_at')->take(10)->get();

// –§—ñ–ª—å—Ç—Ä –ø–æ —Ç–∏–ø—É –ø–æ–¥—ñ—ó
TaskHistory::where('event_type', 'status_changed')->get();
```

## üìä –©–æ –ª–æ–≥—É—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ

‚úÖ **–í—Å—ñ –∑–º—ñ–Ω–∏ —Ç–∞—Å–∫—ñ–≤**
- –ó–º—ñ–Ω–∞ —Å—Ç–∞—Ç—É—Å—É, –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç—É, –¥–µ–¥–ª–∞–π–Ω—É
- –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è/–∑–Ω—è—Ç—Ç—è –≤–∏–∫–æ–Ω–∞–≤—Ü—è
- –ü–µ—Ä–µ–º—ñ—â–µ–Ω–Ω—è –º—ñ–∂ —Å–µ–∫—Ü—ñ—è–º–∏
- –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—è/–≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞—Å–∫–∞

‚úÖ **–ó —Ä—ñ–∑–Ω–∏—Ö –¥–∂–µ—Ä–µ–ª**
- üíª –õ–æ–∫–∞–ª—å–Ω—ñ –∑–º—ñ–Ω–∏ (—á–µ—Ä–µ–∑ UI –∞–±–æ API)
- üåê Webhooks –∑ Asana
- üîÑ –†—É—á–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –∑ Asana

## üé® –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è –≤ UI

| –Ü–∫–æ–Ω–∫–∞ | –ó–Ω–∞—á–µ–Ω–Ω—è |
|--------|----------|
| üíª | –õ–æ–∫–∞–ª—å–Ω–∞ –∑–º—ñ–Ω–∞ |
| üåê | Webhook –∑ Asana |
| üîÑ | –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è |
| üÜï | –°—Ç–≤–æ—Ä–µ–Ω–æ |
| ‚úèÔ∏è | –û–Ω–æ–≤–ª–µ–Ω–æ |
| üîÑ | –ó–º—ñ–Ω–∞ —Å—Ç–∞—Ç—É—Å—É |
| üë§ | –ó–º—ñ–Ω–∞ –≤–∏–∫–æ–Ω–∞–≤—Ü—è |
| ‚ö° | –ó–º—ñ–Ω–∞ –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç—É |
| ‚úÖ | –ó–∞–≤–µ—Ä—à–µ–Ω–æ |

## üîç –§—ñ–ª—å—Ç—Ä–∏

–í UI –¥–æ—Å—Ç—É–ø–Ω—ñ —Ñ—ñ–ª—å—Ç—Ä–∏:
- **–¢–∏–ø –ø–æ–¥—ñ—ó**: –≤–∏–±—ñ—Ä –∑ 14 —Ç–∏–ø—ñ–≤ –ø–æ–¥—ñ–π
- **–î–∂–µ—Ä–µ–ª–æ**: local, asana_webhook, asana_sync

## üìñ –î–µ—Ç–∞–ª—å–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

–ü–æ–≤–Ω–∏–π –æ–ø–∏—Å: [task-history-guide.md](task-history-guide.md)

## üöÄ –ö–æ—Ä–∏—Å–Ω—ñ –∑–∞–ø–∏—Ç–∏

### –ê—É–¥–∏—Ç –∑–º—ñ–Ω –∑–∞ –ø–µ—Ä—ñ–æ–¥
```php
TaskHistory::whereBetween('event_at', [$start, $end])
    ->with(['task', 'user'])
    ->get();
```

### –ó–º—ñ–Ω–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
```php
TaskHistory::where('user_id', $userId)
    ->latest('event_at')
    ->get();
```

### –¢—ñ–ª—å–∫–∏ –∑–º—ñ–Ω–∏ –∑ Asana
```php
TaskHistory::where('source', 'asana_webhook')
    ->orWhere('source', 'asana_sync')
    ->get();
```

## ‚ö° Performance

- ‚úÖ –Ü–Ω–¥–µ–∫—Å–∏ –Ω–∞ (task_id, event_at)
- ‚úÖ –Ü–Ω–¥–µ–∫—Å–∏ –Ω–∞ (task_id, event_type)
- ‚úÖ –ü–∞–≥—ñ–Ω–∞—Ü—ñ—è –≤ UI (10/25/50/100)

## üîê –ë–µ–∑–ø–µ–∫–∞

- ‚úÖ –¢—ñ–ª—å–∫–∏ —á–∏—Ç–∞–Ω–Ω—è —á–µ—Ä–µ–∑ UI
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è (–Ω–µ –º–æ–∂–Ω–∞ –æ–±—ñ–π—Ç–∏)
- ‚úÖ –ö–∞—Å–∫–∞–¥–Ω–µ –≤–∏–¥–∞–ª–µ–Ω–Ω—è –ø—Ä–∏ –≤–∏–¥–∞–ª–µ–Ω–Ω—ñ —Ç–∞—Å–∫–∞
